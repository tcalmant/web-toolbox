import{b,aS as Ot,aT as Jt,a as Mt,p as It,aH as Vt,g as Dt,s as Nt,aU as $t,r as A,aV as Gt,w as ie,z as gt,h as m,aD as Ve,e as Ut,aW as jt,X as J,aX as en,aO as tn,az as nn,aY as an,B as Qe,aP as ln,a2 as on,aZ as un,a_ as rn,K as sn,L as cn,M as dn,O as z,N as vn,a$ as pe,Q as U,b0 as dt,R as Be,V as fn,S as mn,b1 as hn}from"./index-BBR9EyUS.js";import{p as I,u as gn,f as yn,g as Mn,d as pt,Q as Dn,a as bn}from"./QSelect-CWpaQQTb.js";import{u as _n}from"./use-render-cache-DLxPkVnQ.js";import{T as wn}from"./TouchPan-dGTjJVLM.js";import{Q as pn}from"./QPage-CT_NxtdU.js";import{f as kn,d as xn,a as kt}from"./timeUtils-B2Ku6ijV.js";const De=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Yn(e,o,c){return Object.prototype.toString.call(e)==="[object Date]"&&(c=e.getDate(),o=e.getMonth()+1,e=e.getFullYear()),Hn(bt(e,o,c))}function xt(e,o,c){return At(qn(e,o,c))}function Cn(e){return Sn(e)===0}function lt(e,o){return o<=6?31:o<=11||Cn(e)?30:29}function Sn(e){const o=De.length;let c=De[0],s,d,r,w,v;if(e<c||e>=De[o-1])throw new Error("Invalid Jalaali year "+e);for(v=1;v<o&&(s=De[v],d=s-c,!(e<s));v+=1)c=s;return w=e-c,d-w<6&&(w=w-d+j(d+4,33)*33),r=le(le(w+1,33)-1,4),r===-1&&(r=4),r}function Lt(e,o){const c=De.length,s=e+621;let d=-14,r=De[0],w,v,M,N,g;if(e<r||e>=De[c-1])throw new Error("Invalid Jalaali year "+e);for(g=1;g<c&&(w=De[g],v=w-r,!(e<w));g+=1)d=d+j(v,33)*8+j(le(v,33),4),r=w;N=e-r,d=d+j(N,33)*8+j(le(N,33)+3,4),le(v,33)===4&&v-N===4&&(d+=1);const p=j(s,4)-j((j(s,100)+1)*3,4)-150,K=20+d-p;return o||(v-N<6&&(N=N-v+j(v+4,33)*33),M=le(le(N+1,33)-1,4),M===-1&&(M=4)),{leap:M,gy:s,march:K}}function qn(e,o,c){const s=Lt(e,!0);return bt(s.gy,3,s.march)+(o-1)*31-j(o,7)*(o-7)+c-1}function Hn(e){const o=At(e).gy;let c=o-621,s,d,r;const w=Lt(c,!1),v=bt(o,3,w.march);if(r=e-v,r>=0){if(r<=185)return d=1+j(r,31),s=le(r,31)+1,{jy:c,jm:d,jd:s};r-=186}else c-=1,r+=179,w.leap===1&&(r+=1);return d=7+j(r,30),s=le(r,30)+1,{jy:c,jm:d,jd:s}}function bt(e,o,c){let s=j((e+j(o-8,6)+100100)*1461,4)+j(153*le(o+9,12)+2,5)+c-34840408;return s=s-j(j(e+100100+j(o-8,6),100)*3,4)+752,s}function At(e){let o=4*e+139361631;o=o+j(j(4*e+183187720,146097)*3,4)*4-3908;const c=j(le(o,1461),4)*5+308,s=j(le(c,153),5)+1,d=le(j(c,153),12)+1;return{gy:j(o,1461)-100100+j(8-d,6),gm:d,gd:s}}function j(e,o){return~~(e/o)}function le(e,o){return e-~~(e/o)*o}const Tn=["gregorian","persian"],ot={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Tn.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Ft=["update:modelValue"];function fe(e){return e.year+"/"+I(e.month)+"/"+I(e.day)}function Pt(e,o){const c=b(()=>e.disable!==!0&&e.readonly!==!0),s=b(()=>c.value===!0?0:-1),d=b(()=>{const v=[];return e.color!==void 0&&v.push(`bg-${e.color}`),e.textColor!==void 0&&v.push(`text-${e.textColor}`),v.join(" ")});function r(){return e.locale!==void 0?{...o.lang.date,...e.locale}:o.lang.date}function w(v){const M=new Date,N=v===!0?null:0;if(e.calendar==="persian"){const g=Yn(M);return{year:g.jy,month:g.jm,day:g.jd}}return{year:M.getFullYear(),month:M.getMonth()+1,day:M.getDate(),hour:N,minute:N,second:N,millisecond:N}}return{editable:c,tabindex:s,headerClass:d,getLocale:r,getCurrentDate:w}}const Et=864e5,On=36e5,yt=6e4,zt="YYYY-MM-DDTHH:mm:ss.SSSZ",In=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Vn=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,vt={};function Nn(e,o){const c="("+o.days.join("|")+")",s=e+c;if(vt[s]!==void 0)return vt[s];const d="("+o.daysShort.join("|")+")",r="("+o.months.join("|")+")",w="("+o.monthsShort.join("|")+")",v={};let M=0;const N=e.replace(Vn,p=>{switch(M++,p){case"YY":return v.YY=M,"(-?\\d{1,2})";case"YYYY":return v.YYYY=M,"(-?\\d{1,4})";case"M":return v.M=M,"(\\d{1,2})";case"Mo":return v.M=M++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return v.M=M,"(\\d{2})";case"MMM":return v.MMM=M,w;case"MMMM":return v.MMMM=M,r;case"D":return v.D=M,"(\\d{1,2})";case"Do":return v.D=M++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return v.D=M,"(\\d{2})";case"H":return v.H=M,"(\\d{1,2})";case"HH":return v.H=M,"(\\d{2})";case"h":return v.h=M,"(\\d{1,2})";case"hh":return v.h=M,"(\\d{2})";case"m":return v.m=M,"(\\d{1,2})";case"mm":return v.m=M,"(\\d{2})";case"s":return v.s=M,"(\\d{1,2})";case"ss":return v.s=M,"(\\d{2})";case"S":return v.S=M,"(\\d{1})";case"SS":return v.S=M,"(\\d{2})";case"SSS":return v.S=M,"(\\d{3})";case"A":return v.A=M,"(AM|PM)";case"a":return v.a=M,"(am|pm)";case"aa":return v.aa=M,"(a\\.m\\.|p\\.m\\.)";case"ddd":return d;case"dddd":return c;case"Q":case"d":case"E":return"(\\d{1})";case"do":return M++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return M++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return M++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return v.Z=M,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return v.ZZ=M,"(Z|[+-]\\d{2}\\d{2})";case"X":return v.X=M,"(-?\\d+)";case"x":return v.x=M,"(-?\\d{4,})";default:return M--,p[0]==="["&&(p=p.substring(1,p.length-1)),p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),g={map:v,regex:new RegExp("^"+N)};return vt[s]=g,g}function Bt(e,o){return e!==void 0?e:o!==void 0?o.date:Jt.date}function Yt(e,o=""){const c=e>0?"-":"+",s=Math.abs(e),d=Math.floor(s/60),r=s%60;return c+I(d)+o+I(r)}function Ze(e,o,c,s,d){const r={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(d!==void 0&&Object.assign(r,d),e==null||e===""||typeof e!="string")return r;o===void 0&&(o=zt);const w=Bt(c,Ot.props),v=w.months,M=w.monthsShort,{regex:N,map:g}=Nn(o,w),p=e.match(N);if(p===null)return r;let K="";if(g.X!==void 0||g.x!==void 0){const L=parseInt(p[g.X!==void 0?g.X:g.x],10);if(isNaN(L)===!0||L<0)return r;const F=new Date(L*(g.X!==void 0?1e3:1));r.year=F.getFullYear(),r.month=F.getMonth()+1,r.day=F.getDate(),r.hour=F.getHours(),r.minute=F.getMinutes(),r.second=F.getSeconds(),r.millisecond=F.getMilliseconds()}else{if(g.YYYY!==void 0)r.year=parseInt(p[g.YYYY],10);else if(g.YY!==void 0){const L=parseInt(p[g.YY],10);r.year=L<0?L:2e3+L}if(g.M!==void 0){if(r.month=parseInt(p[g.M],10),r.month<1||r.month>12)return r}else g.MMM!==void 0?r.month=M.indexOf(p[g.MMM])+1:g.MMMM!==void 0&&(r.month=v.indexOf(p[g.MMMM])+1);if(g.D!==void 0){if(r.day=parseInt(p[g.D],10),r.year===null||r.month===null||r.day<1)return r;const L=s!=="persian"?new Date(r.year,r.month,0).getDate():lt(r.year,r.month);if(r.day>L)return r}g.H!==void 0?r.hour=parseInt(p[g.H],10)%24:g.h!==void 0&&(r.hour=parseInt(p[g.h],10)%12,(g.A&&p[g.A]==="PM"||g.a&&p[g.a]==="pm"||g.aa&&p[g.aa]==="p.m.")&&(r.hour+=12),r.hour=r.hour%24),g.m!==void 0&&(r.minute=parseInt(p[g.m],10)%60),g.s!==void 0&&(r.second=parseInt(p[g.s],10)%60),g.S!==void 0&&(r.millisecond=parseInt(p[g.S],10)*10**(3-p[g.S].length)),(g.Z!==void 0||g.ZZ!==void 0)&&(K=g.Z!==void 0?p[g.Z].replace(":",""):p[g.ZZ],r.timezoneOffset=(K[0]==="+"?-1:1)*(60*K.slice(1,3)+1*K.slice(3,5)))}return r.dateHash=I(r.year,6)+"/"+I(r.month)+"/"+I(r.day),r.timeHash=I(r.hour)+":"+I(r.minute)+":"+I(r.second)+K,r}function ft(e){const o=new Date(e.getFullYear(),e.getMonth(),e.getDate());o.setDate(o.getDate()-(o.getDay()+6)%7+3);const c=new Date(o.getFullYear(),0,4);c.setDate(c.getDate()-(c.getDay()+6)%7+3);const s=o.getTimezoneOffset()-c.getTimezoneOffset();o.setHours(o.getHours()-s);const d=(o-c)/(Et*7);return 1+Math.floor(d)}function me(e,o,c){const s=new Date(e),d=`set${c===!0?"UTC":""}`;switch(o){case"year":case"years":s[`${d}Month`](0);case"month":case"months":s[`${d}Date`](1);case"day":case"days":case"date":s[`${d}Hours`](0);case"hour":case"hours":s[`${d}Minutes`](0);case"minute":case"minutes":s[`${d}Seconds`](0);case"second":case"seconds":s[`${d}Milliseconds`](0)}return s}function tt(e,o,c){return(e.getTime()-e.getTimezoneOffset()*yt-(o.getTime()-o.getTimezoneOffset()*yt))/c}function Qt(e,o,c="days"){const s=new Date(e),d=new Date(o);switch(c){case"years":case"year":return s.getFullYear()-d.getFullYear();case"months":case"month":return(s.getFullYear()-d.getFullYear())*12+s.getMonth()-d.getMonth();case"days":case"day":case"date":return tt(me(s,"day"),me(d,"day"),Et);case"hours":case"hour":return tt(me(s,"hour"),me(d,"hour"),On);case"minutes":case"minute":return tt(me(s,"minute"),me(d,"minute"),yt);case"seconds":case"second":return tt(me(s,"second"),me(d,"second"),1e3)}}function mt(e){return Qt(e,me(e,"year"),"days")+1}function Oe(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Ct={YY(e,o,c){const s=this.YYYY(e,o,c)%100;return s>=0?I(s):"-"+I(Math.abs(s))},YYYY(e,o,c){return c??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return Oe(e.getMonth()+1)},MM(e){return I(e.getMonth()+1)},MMM(e,o){return o.monthsShort[e.getMonth()]},MMMM(e,o){return o.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return Oe(this.Q(e))},D(e){return e.getDate()},Do(e){return Oe(e.getDate())},DD(e){return I(e.getDate())},DDD(e){return mt(e)},DDDo(e){return Oe(mt(e))},DDDD(e){return I(mt(e),3)},d(e){return e.getDay()},do(e){return Oe(e.getDay())},dd(e,o){return o.days[e.getDay()].slice(0,2)},ddd(e,o){return o.daysShort[e.getDay()]},dddd(e,o){return o.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return ft(e)},wo(e){return Oe(ft(e))},ww(e){return I(ft(e))},H(e){return e.getHours()},HH(e){return I(e.getHours())},h(e){const o=e.getHours();return o===0?12:o>12?o%12:o},hh(e){return I(this.h(e))},m(e){return e.getMinutes()},mm(e){return I(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return I(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return I(Math.floor(e.getMilliseconds()/10))},SSS(e){return I(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,o,c,s){const d=s??e.getTimezoneOffset();return Yt(d,":")},ZZ(e,o,c,s){const d=s??e.getTimezoneOffset();return Yt(d)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Zt(e,o,c,s,d){if(e!==0&&!e||e===1/0||e===-1/0)return;const r=new Date(e);if(isNaN(r))return;o===void 0&&(o=zt);const w=Bt(c,Ot.props);return o.replace(In,(v,M)=>v in Ct?Ct[v](r,w,s,d):M===void 0?v:M.split("\\]").join("]"))}const ve=20,$n=["Calendar","Years","Months"],St=e=>$n.includes(e),ht=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ie=" — ";function Me(e){return e.year+"/"+I(e.month)}const qt=Mt({name:"QDate",props:{...ot,...Vt,...It,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...ot.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ht},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ht},navigationMaxYearMonth:{type:String,validator:ht},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:St}},emits:[...Ft,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:c}){const{proxy:s}=Dt(),{$q:d}=s,r=Nt(e,d),{getCache:w}=_n(),{tabindex:v,headerClass:M,getLocale:N,getCurrentDate:g}=Pt(e,d);let p;const K=$t(e),L=jt(K),F=A(null),H=A(Ge()),V=A(N()),he=b(()=>Ge()),X=b(()=>N()),k=b(()=>g()),u=A(l(H.value,V.value)),O=A(e.defaultView),ge=b(()=>d.lang.rtl===!0?"right":"left"),x=A(ge.value),y=A(ge.value),T=u.value.year,ne=A(T-T%ve-(T<0?ve:0)),Q=A(null),oe=b(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(r.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),G=b(()=>e.color||"primary"),ue=b(()=>e.textColor||"white"),W=b(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),ce=b(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),R=b(()=>ce.value.filter(t=>typeof t=="string").map(t=>Ee(t,H.value,V.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),re=b(()=>{const t=n=>Ee(n,H.value,V.value);return ce.value.filter(n=>Gt(n)===!0&&n.from!==void 0&&n.to!==void 0).map(n=>({from:t(n.from),to:t(n.to)})).filter(n=>n.from.dateHash!==null&&n.to.dateHash!==null&&n.from.dateHash<n.to.dateHash)}),ke=b(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const n=xt(t.year,t.month,t.day);return new Date(n.gy,n.gm-1,n.gd)}),Ne=b(()=>e.calendar==="persian"?fe:(t,n,a)=>Zt(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),n===void 0?H.value:n,a===void 0?V.value:a,t.year,t.timezoneOffset)),ye=b(()=>R.value.length+re.value.reduce((t,n)=>t+1+Qt(ke.value(n.to),ke.value(n.from)),0)),be=b(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(Q.value!==null){const a=Q.value.init,f=ke.value(a);return V.value.daysShort[f.getDay()]+", "+V.value.monthsShort[a.month-1]+" "+a.day+Ie+"?"}if(ye.value===0)return Ie;if(ye.value>1)return`${ye.value} ${V.value.pluralDay}`;const t=R.value[0],n=ke.value(t);return isNaN(n.valueOf())===!0?Ie:V.value.headerTitle!==void 0?V.value.headerTitle(n,t):V.value.daysShort[n.getDay()]+", "+V.value.monthsShort[t.month-1]+" "+t.day}),Ke=b(()=>R.value.concat(re.value.map(n=>n.from)).sort((n,a)=>n.year-a.year||n.month-a.month)[0]),$e=b(()=>R.value.concat(re.value.map(n=>n.to)).sort((n,a)=>a.year-n.year||a.month-n.month)[0]),Re=b(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(ye.value===0)return Ie;if(ye.value>1){const t=Ke.value,n=$e.value,a=V.value.monthsShort;return a[t.month-1]+(t.year!==n.year?" "+t.year+Ie+a[n.month-1]+" ":t.month!==n.month?Ie+a[n.month-1]:"")+" "+n.year}return R.value[0].year}),xe=b(()=>{const t=[d.iconSet.datetime.arrowLeft,d.iconSet.datetime.arrowRight];return d.lang.rtl===!0?t.reverse():t}),Ye=b(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):V.value.firstDayOfWeek),Ue=b(()=>{const t=V.value.daysShort,n=Ye.value;return n>0?t.slice(n,7).concat(t.slice(0,n)):t}),se=b(()=>{const t=u.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():lt(t.year,t.month)}),Xe=b(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),B=b(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Z=b(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),je=b(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return B.value!==null&&B.value.year>=u.value.year&&(t.year.prev=!1,B.value.year===u.value.year&&B.value.month>=u.value.month&&(t.month.prev=!1)),Z.value!==null&&Z.value.year<=u.value.year&&(t.year.next=!1,Z.value.year===u.value.year&&Z.value.month<=u.value.month&&(t.month.next=!1)),t}),Ce=b(()=>{const t={};return R.value.forEach(n=>{const a=Me(n);t[a]===void 0&&(t[a]=[]),t[a].push(n.day)}),t}),We=b(()=>{const t={};return re.value.forEach(n=>{const a=Me(n.from),f=Me(n.to);if(t[a]===void 0&&(t[a]=[]),t[a].push({from:n.from.day,to:a===f?n.to.day:void 0,range:n}),a<f){let h;const{year:C,month:D}=n.from,Y=D<12?{year:C,month:D+1}:{year:C+1,month:1};for(;(h=Me(Y))<=f;)t[h]===void 0&&(t[h]=[]),t[h].push({from:void 0,to:h===f?n.to.day:void 0,range:n}),Y.month++,Y.month>12&&(Y.year++,Y.month=1)}}),t}),_e=b(()=>{if(Q.value===null)return;const{init:t,initHash:n,final:a,finalHash:f}=Q.value,[h,C]=n<=f?[t,a]:[a,t],D=Me(h),Y=Me(C);if(D!==ee.value&&Y!==ee.value)return;const $={};return D===ee.value?($.from=h.day,$.includeFrom=!0):$.from=1,Y===ee.value?($.to=C.day,$.includeTo=!0):$.to=se.value,$}),ee=b(()=>Me(u.value)),ut=b(()=>{const t={};if(e.options===void 0){for(let a=1;a<=se.value;a++)t[a]=!0;return t}const n=typeof e.options=="function"?e.options:a=>e.options.includes(a);for(let a=1;a<=se.value;a++){const f=ee.value+"/"+I(a);t[a]=n(f)}return t}),rt=b(()=>{const t={};if(e.events===void 0)for(let n=1;n<=se.value;n++)t[n]=!1;else{const n=typeof e.events=="function"?e.events:a=>e.events.includes(a);for(let a=1;a<=se.value;a++){const f=ee.value+"/"+I(a);t[a]=n(f)===!0&&Xe.value(f)}}return t}),Se=b(()=>{let t,n;const{year:a,month:f}=u.value;if(e.calendar!=="persian")t=new Date(a,f-1,1),n=new Date(a,f-1,0).getDate();else{const h=xt(a,f,1);t=new Date(h.gy,h.gm-1,h.gd);let C=f-1,D=a;C===0&&(C=12,D--),n=lt(D,C)}return{days:t.getDay()-Ye.value-1,endDay:n}}),we=b(()=>{const t=[],{days:n,endDay:a}=Se.value,f=n<0?n+7:n;if(f<6)for(let D=a-f;D<=a;D++)t.push({i:D,fill:!0});const h=t.length;for(let D=1;D<=se.value;D++){const Y={i:D,event:rt.value[D],classes:[]};ut.value[D]===!0&&(Y.in=!0,Y.flat=!0),t.push(Y)}if(Ce.value[ee.value]!==void 0&&Ce.value[ee.value].forEach(D=>{const Y=h+D-1;Object.assign(t[Y],{selected:!0,unelevated:!0,flat:!1,color:G.value,textColor:ue.value})}),We.value[ee.value]!==void 0&&We.value[ee.value].forEach(D=>{if(D.from!==void 0){const Y=h+D.from-1,$=h+(D.to||se.value)-1;for(let ze=Y;ze<=$;ze++)Object.assign(t[ze],{range:D.range,unelevated:!0,color:G.value,textColor:ue.value});Object.assign(t[Y],{rangeFrom:!0,flat:!1}),D.to!==void 0&&Object.assign(t[$],{rangeTo:!0,flat:!1})}else if(D.to!==void 0){const Y=h+D.to-1;for(let $=h;$<=Y;$++)Object.assign(t[$],{range:D.range,unelevated:!0,color:G.value,textColor:ue.value});Object.assign(t[Y],{flat:!1,rangeTo:!0})}else{const Y=h+se.value-1;for(let $=h;$<=Y;$++)Object.assign(t[$],{range:D.range,unelevated:!0,color:G.value,textColor:ue.value})}}),_e.value!==void 0){const D=h+_e.value.from-1,Y=h+_e.value.to-1;for(let $=D;$<=Y;$++)t[$].color=G.value,t[$].editRange=!0;_e.value.includeFrom===!0&&(t[D].editRangeFrom=!0),_e.value.includeTo===!0&&(t[Y].editRangeTo=!0)}u.value.year===k.value.year&&u.value.month===k.value.month&&(t[h+k.value.day-1].today=!0);const C=t.length%7;if(C>0){const D=7-C;for(let Y=1;Y<=D;Y++)t.push({i:Y,fill:!0})}return t.forEach(D=>{let Y="q-date__calendar-item ";D.fill===!0?Y+="q-date__calendar-item--fill":(Y+=`q-date__calendar-item--${D.in===!0?"in":"out"}`,D.range!==void 0&&(Y+=` q-date__range${D.rangeTo===!0?"-to":D.rangeFrom===!0?"-from":""}`),D.editRange===!0&&(Y+=` q-date__edit-range${D.editRangeFrom===!0?"-from":""}${D.editRangeTo===!0?"-to":""}`),(D.range!==void 0||D.editRange===!0)&&(Y+=` text-${D.color}`)),D.classes=Y}),t}),qe=b(()=>e.disable===!0?{"aria-disabled":"true"}:{});ie(()=>e.modelValue,t=>{if(p===JSON.stringify(t))p=0;else{const n=l(H.value,V.value);te(n.year,n.month,n)}}),ie(O,()=>{F.value!==null&&s.$el.contains(document.activeElement)===!0&&F.value.focus()}),ie(()=>u.value.year+"|"+u.value.month,()=>{c("navigation",{year:u.value.year,month:u.value.month})}),ie(he,t=>{wt(t,V.value,"mask"),H.value=t}),ie(X,t=>{wt(H.value,t,"locale"),V.value=t});function Le(t){p=JSON.stringify(t)}function Ae(){const{year:t,month:n,day:a}=k.value,f={...u.value,year:t,month:n,day:a},h=Ce.value[Me(f)];(h===void 0||h.includes(f.day)===!1)&&st(f),de(f.year,f.month)}function Je(t){St(t)===!0&&(O.value=t)}function Fe(t,n){["month","year"].includes(t)&&(t==="month"?_:S)(n===!0?-1:1)}function de(t,n){O.value="Calendar",te(t,n)}function Pe(t,n){if(e.range===!1||!t){Q.value=null;return}const a=Object.assign({...u.value},t),f=n!==void 0?Object.assign({...u.value},n):a;Q.value={init:a,initHash:fe(a),final:f,finalHash:fe(f)},de(a.year,a.month)}function Ge(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ee(t,n,a){return Ze(t,n,a,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function l(t,n){const a=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(a.length===0)return i();const f=a[a.length-1],h=Ee(f.from!==void 0?f.from:f,t,n);return h.dateHash===null?i():h}function i(){let t,n;if(e.defaultYearMonth!==void 0){const a=e.defaultYearMonth.split("/");t=parseInt(a[0],10),n=parseInt(a[1],10)}else{const a=k.value!==void 0?k.value:g();t=a.year,n=a.month}return{year:t,month:n,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+I(n)+"/01"}}function _(t){let n=u.value.year,a=Number(u.value.month)+t;a===13?(a=1,n++):a===0&&(a=12,n--),te(n,a),W.value===!0&&He("month")}function S(t){const n=Number(u.value.year)+t;te(n,u.value.month),W.value===!0&&He("year")}function P(t){te(t,u.value.month),O.value=e.defaultView==="Years"?"Months":"Calendar",W.value===!0&&He("year")}function ae(t){te(u.value.year,t),O.value="Calendar",W.value===!0&&He("month")}function q(t,n){(Ce.value[n]?.includes(t.day)===!0?it:st)(t)}function E(t){return{year:t.year,month:t.month,day:t.day}}function te(t,n,a){if(B.value!==null&&t<=B.value.year&&((n<B.value.month||t<B.value.year)&&(n=B.value.month),t=B.value.year),Z.value!==null&&t>=Z.value.year&&((n>Z.value.month||t>Z.value.year)&&(n=Z.value.month),t=Z.value.year),a!==void 0){const{hour:h,minute:C,second:D,millisecond:Y,timezoneOffset:$,timeHash:ze}=a;Object.assign(u.value,{hour:h,minute:C,second:D,millisecond:Y,timezoneOffset:$,timeHash:ze})}const f=t+"/"+I(n)+"/01";f!==u.value.dateHash&&(x.value=u.value.dateHash<f==(d.lang.rtl!==!0)?"left":"right",t!==u.value.year&&(y.value=x.value),gt(()=>{ne.value=t-t%ve-(t<0?ve:0),Object.assign(u.value,{year:t,month:n,day:1,dateHash:f})}))}function et(t,n,a){const f=t!==null&&t.length===1&&e.multiple===!1?t[0]:t,{reason:h,details:C}=_t(n,a);Le(f),c("update:modelValue",f,h,C)}function He(t){const n=R.value[0]!==void 0&&R.value[0].dateHash!==null?{...R.value[0]}:{...u.value};gt(()=>{n.year=u.value.year,n.month=u.value.month;const a=e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():lt(n.year,n.month);n.day=Math.min(Math.max(1,n.day),a);const f=Te(n),{details:h}=_t("",n);Le(f),c("update:modelValue",f,t,h)})}function _t(t,n){return n.from!==void 0?{reason:`${t}-range`,details:{...E(n.target),from:E(n.from),to:E(n.to)}}:{reason:`${t}-day`,details:E(n)}}function Te(t,n,a){return t.from!==void 0?{from:Ne.value(t.from,n,a),to:Ne.value(t.to,n,a)}:Ne.value(t,n,a)}function st(t){let n;if(e.multiple===!0)if(t.from!==void 0){const a=fe(t.from),f=fe(t.to),h=R.value.filter(D=>D.dateHash<a||D.dateHash>f),C=re.value.filter(({from:D,to:Y})=>Y.dateHash<a||D.dateHash>f);n=h.concat(C).concat(t).map(D=>Te(D))}else{const a=ce.value.slice();a.push(Te(t)),n=a}else n=Te(t);et(n,"add",t)}function it(t){if(e.noUnset===!0)return;let n=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const a=Te(t);t.from!==void 0?n=e.modelValue.filter(f=>f.from!==void 0?f.from!==a.from&&f.to!==a.to:!0):n=e.modelValue.filter(f=>f!==a),n.length===0&&(n=null)}et(n,"remove",t)}function wt(t,n,a){const f=R.value.concat(re.value).map(C=>Te(C,t,n)).filter(C=>C.from!==void 0?C.from.dateHash!==null&&C.to.dateHash!==null:C.dateHash!==null),h=(e.multiple===!0?f:f[0])||null;Le(h),c("update:modelValue",h,a)}function Kt(){if(e.minimal!==!0)return m("div",{class:"q-date__header "+M.value},[m("div",{class:"relative-position"},[m(Ve,{name:"q-transition--fade"},()=>m("div",{key:"h-yr-"+Re.value,class:"q-date__header-subtitle q-date__header-link "+(O.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:v.value,...w("vY",{onClick(){O.value="Years"},onKeyup(t){t.keyCode===13&&(O.value="Years")}})},[Re.value]))]),m("div",{class:"q-date__header-title relative-position flex no-wrap"},[m("div",{class:"relative-position col"},[m(Ve,{name:"q-transition--fade"},()=>m("div",{key:"h-sub"+be.value,class:"q-date__header-title-label q-date__header-link "+(O.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:v.value,...w("vC",{onClick(){O.value="Calendar"},onKeyup(t){t.keyCode===13&&(O.value="Calendar")}})},[be.value]))]),e.todayBtn===!0?m(J,{class:"q-date__header-today self-start",icon:d.iconSet.datetime.today,ariaLabel:d.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:v.value,onClick:Ae}):null])])}function ct({label:t,type:n,key:a,dir:f,goTo:h,boundaries:C,cls:D}){return[m("div",{class:"row items-center q-date__arrow"},[m(J,{round:!0,dense:!0,size:"sm",flat:!0,icon:xe.value[0],ariaLabel:n==="Years"?d.lang.date.prevYear:d.lang.date.prevMonth,tabindex:v.value,disable:C.prev===!1,...w("go-#"+n,{onClick(){h(-1)}})})]),m("div",{class:"relative-position overflow-hidden flex flex-center"+D},[m(Ve,{name:"q-transition--jump-"+f},()=>m("div",{key:a},[m(J,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:v.value,...w("view#"+n,{onClick:()=>{O.value=n}})})]))]),m("div",{class:"row items-center q-date__arrow"},[m(J,{round:!0,dense:!0,size:"sm",flat:!0,icon:xe.value[1],ariaLabel:n==="Years"?d.lang.date.nextYear:d.lang.date.nextMonth,tabindex:v.value,disable:C.next===!1,...w("go+#"+n,{onClick(){h(1)}})})])]}const Rt={Calendar:()=>[m("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[m("div",{class:"q-date__navigation row items-center no-wrap"},ct({label:V.value.months[u.value.month-1],type:"Months",key:u.value.month,dir:x.value,goTo:_,boundaries:je.value.month,cls:" col"}).concat(ct({label:u.value.year,type:"Years",key:u.value.year,dir:y.value,goTo:S,boundaries:je.value.year,cls:""}))),m("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Ue.value.map(t=>m("div",{class:"q-date__calendar-item"},[m("div",t)]))),m("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[m(Ve,{name:"q-transition--slide-"+x.value},()=>m("div",{key:ee.value,class:"q-date__calendar-days fit"},we.value.map(t=>m("div",{class:t.classes},[t.in===!0?m(J,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:v.value,...w("day#"+t.i,{onClick:()=>{Xt(t.i)},onMouseover:()=>{Wt(t.i)}})},t.event!==!1?()=>m("div",{class:"q-date__event bg-"+t.event}):null):m("div",""+t.i)]))))])])],Months(){const t=u.value.year===k.value.year,n=f=>B.value!==null&&u.value.year===B.value.year&&B.value.month>f||Z.value!==null&&u.value.year===Z.value.year&&Z.value.month<f,a=V.value.monthsShort.map((f,h)=>{const C=u.value.month===h+1;return m("div",{class:"q-date__months-item flex flex-center"},[m(J,{class:t===!0&&k.value.month===h+1?"q-date__today":null,flat:C!==!0,label:f,unelevated:C,color:C===!0?G.value:null,textColor:C===!0?ue.value:null,tabindex:v.value,disable:n(h+1),...w("month#"+h,{onClick:()=>{ae(h+1)}})})])});return e.yearsInMonthView===!0&&a.unshift(m("div",{class:"row no-wrap full-width"},[ct({label:u.value.year,type:"Years",key:u.value.year,dir:y.value,goTo:S,boundaries:je.value.year,cls:" col"})])),m("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},a)},Years(){const t=ne.value,n=t+ve,a=[],f=h=>B.value!==null&&B.value.year>h||Z.value!==null&&Z.value.year<h;for(let h=t;h<=n;h++){const C=u.value.year===h;a.push(m("div",{class:"q-date__years-item flex flex-center"},[m(J,{key:"yr"+h,class:k.value.year===h?"q-date__today":null,flat:!C,label:h,dense:!0,unelevated:C,color:C===!0?G.value:null,textColor:C===!0?ue.value:null,tabindex:v.value,disable:f(h),...w("yr#"+h,{onClick:()=>{P(h)}})})]))}return m("div",{class:"q-date__view q-date__years flex flex-center"},[m("div",{class:"col-auto"},[m(J,{round:!0,dense:!0,flat:!0,icon:xe.value[0],ariaLabel:d.lang.date.prevRangeYears(ve),tabindex:v.value,disable:f(t),...w("y-",{onClick:()=>{ne.value-=ve}})})]),m("div",{class:"q-date__years-content col self-stretch row items-center"},a),m("div",{class:"col-auto"},[m(J,{round:!0,dense:!0,flat:!0,icon:xe.value[1],ariaLabel:d.lang.date.nextRangeYears(ve),tabindex:v.value,disable:f(n),...w("y+",{onClick:()=>{ne.value+=ve}})})])])}};function Xt(t){const n={...u.value,day:t};if(e.range===!1){q(n,ee.value);return}if(Q.value===null){const a=we.value.find(h=>h.fill!==!0&&h.i===t);if(e.noUnset!==!0&&a.range!==void 0){it({target:n,from:a.range.from,to:a.range.to});return}if(a.selected===!0){it(n);return}const f=fe(n);Q.value={init:n,initHash:f,final:n,finalHash:f},c("rangeStart",E(n))}else{const a=Q.value.initHash,f=fe(n),h=a<=f?{from:Q.value.init,to:n}:{from:n,to:Q.value.init};Q.value=null,st(a===f?n:{target:n,...h}),c("rangeEnd",{from:E(h.from),to:E(h.to)})}}function Wt(t){if(Q.value!==null){const n={...u.value,day:t};Object.assign(Q.value,{final:n,finalHash:fe(n)})}}return Object.assign(s,{setToday:Ae,setView:Je,offsetCalendar:Fe,setCalendarTo:de,setEditingRange:Pe}),()=>{const t=[m("div",{class:"q-date__content col relative-position"},[m(Ve,{name:"q-transition--fade"},Rt[O.value])])],n=Ut(o.default);return n!==void 0&&t.push(m("div",{class:"q-date__actions"},n)),e.name!==void 0&&e.disable!==!0&&L(t,"push"),m("div",{class:oe.value,...qe.value},[Kt(),m("div",{ref:F,class:"q-date__main col column",tabindex:-1},t)])}}}),nt=Mt({name:"QPopupProxy",props:{...gn,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:o,emit:c,attrs:s}){const{proxy:d}=Dt(),{$q:r}=d,w=A(!1),v=A(null),M=b(()=>parseInt(e.breakpoint,10)),{canShow:N}=yn({showing:w});function g(){return r.screen.width<M.value||r.screen.height<M.value?"dialog":"menu"}const p=A(g()),K=b(()=>p.value==="menu"?{maxHeight:"99vh"}:{});ie(()=>g(),H=>{w.value!==!0&&(p.value=H)});function L(H){w.value=!0,c("show",H)}function F(H){w.value=!1,p.value=g(),c("hide",H)}return Object.assign(d,{show(H){N(H)===!0&&v.value.show(H)},hide(H){v.value.hide(H)},toggle(H){v.value.toggle(H)}}),en(d,"currentComponent",()=>({type:p.value,ref:v.value})),()=>{const H={ref:v,...K.value,...s,onShow:L,onHide:F};let V;return p.value==="dialog"?V=tn:(V=Mn,Object.assign(H,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),m(V,H,o.default)}}});function Un(e,o){return e.hour!==null&&e.minute===null?"minute":"hour"}function jn(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}const Ht=Mt({name:"QTime",props:{...It,...Vt,...ot,modelValue:{required:!0,validator:e=>typeof e=="string"||e===null},mask:{...ot.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Ft,setup(e,{slots:o,emit:c}){const s=Dt(),{$q:d}=s.proxy,r=Nt(e,d),{tabindex:w,headerClass:v,getLocale:M,getCurrentDate:N}=Pt(e,d),g=$t(e),p=jt(g);let K,L;const F=A(null),H=b(()=>Re()),V=b(()=>M()),he=b(()=>xe()),X=Ze(e.modelValue,H.value,V.value,e.calendar,he.value),k=A(Un(X)),u=A(X),O=A(X.hour===null||X.hour<12),ge=b(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(r.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),x=b(()=>{const l=u.value;return{hour:l.hour===null?"--":y.value===!0?I(l.hour):String(O.value===!0?l.hour===0?12:l.hour:l.hour>12?l.hour-12:l.hour),minute:l.minute===null?"--":I(l.minute),second:l.second===null?"--":I(l.second)}}),y=b(()=>e.format24h!==null?e.format24h:d.lang.date.format24h),T=b(()=>{const l=k.value==="hour",i=l===!0?12:60,_=u.value[k.value];let P=`rotate(${Math.round(_*(360/i))-180}deg) translateX(-50%)`;return l===!0&&y.value===!0&&u.value.hour>=12&&(P+=" scale(.7)"),{transform:P}}),ne=b(()=>u.value.hour!==null),Q=b(()=>ne.value===!0&&u.value.minute!==null),oe=b(()=>e.hourOptions!==void 0?l=>e.hourOptions.includes(l):e.options!==void 0?l=>e.options(l,null,null):null),G=b(()=>e.minuteOptions!==void 0?l=>e.minuteOptions.includes(l):e.options!==void 0?l=>e.options(u.value.hour,l,null):null),ue=b(()=>e.secondOptions!==void 0?l=>e.secondOptions.includes(l):e.options!==void 0?l=>e.options(u.value.hour,u.value.minute,l):null),W=b(()=>{if(oe.value===null)return null;const l=be(0,11,oe.value),i=be(12,11,oe.value);return{am:l,pm:i,values:l.values.concat(i.values)}}),ce=b(()=>G.value!==null?be(0,59,G.value):null),R=b(()=>ue.value!==null?be(0,59,ue.value):null),re=b(()=>{switch(k.value){case"hour":return W.value;case"minute":return ce.value;case"second":return R.value}}),ke=b(()=>{let l,i,_=0,S=1;const P=re.value!==null?re.value.values:void 0;k.value==="hour"?y.value===!0?(l=0,i=23):(l=0,i=11,O.value===!1&&(_=12)):(l=0,i=55,S=5);const ae=[];for(let q=l,E=l;q<=i;q+=S,E++){const te=q+_,et=P?.includes(te)===!1,He=k.value==="hour"&&q===0?y.value===!0?"00":"12":q;ae.push({val:te,index:E,disable:et,label:He})}return ae}),Ne=b(()=>[[wn,se,void 0,{stop:!0,prevent:!0,mouse:!0}]]);ie(()=>e.modelValue,l=>{const i=Ze(l,H.value,V.value,e.calendar,he.value);(i.dateHash!==u.value.dateHash||i.timeHash!==u.value.timeHash)&&(u.value=i,i.hour===null?k.value="hour":O.value=i.hour<12)}),ie([H,V],()=>{gt(()=>{Pe()})});function ye(){const l={...N(),...jn()};Pe(l),Object.assign(u.value,l),k.value="hour"}function be(l,i,_){const S=Array.apply(null,{length:i+1}).map((P,ae)=>{const q=ae+l;return{index:q,val:_(q)===!0}}).filter(P=>P.val===!0).map(P=>P.index);return{min:S[0],max:S[S.length-1],values:S,threshold:i+1}}function Ke(l,i,_){const S=Math.abs(l-i);return Math.min(S,_-S)}function $e(l,{min:i,max:_,values:S,threshold:P}){if(l===i)return i;if(l<i||l>_)return Ke(l,i,P)<=Ke(l,_,P)?i:_;const ae=S.findIndex(te=>l<=te),q=S[ae-1],E=S[ae];return l-q<=E-l?q:E}function Re(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function xe(){if(typeof e.defaultDate!="string"){const l=N(!0);return l.dateHash=fe(l),l}return Ze(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function Ye(){return an(s)===!0||re.value!==null&&(re.value.values.length===0||k.value==="hour"&&y.value!==!0&&W.value[O.value===!0?"am":"pm"].values.length===0)}function Ue(){const l=F.value,{top:i,left:_,width:S}=l.getBoundingClientRect(),P=S/2;return{top:i+P,left:_+P,dist:P*.7}}function se(l){if(Ye()!==!0){if(l.isFirst===!0){K=Ue(),L=B(l.evt,K);return}L=B(l.evt,K,L),l.isFinal===!0&&(K=!1,L=null,Xe())}}function Xe(){k.value==="hour"?k.value="minute":e.withSeconds&&k.value==="minute"&&(k.value="second")}function B(l,i,_){const S=nn(l),P=Math.abs(S.top-i.top),ae=Math.sqrt(Math.pow(Math.abs(S.top-i.top),2)+Math.pow(Math.abs(S.left-i.left),2));let q,E=Math.asin(P/ae)*(180/Math.PI);if(S.top<i.top?E=i.left<S.left?90-E:270+E:E=i.left<S.left?E+90:270-E,k.value==="hour"){if(q=E/30,W.value!==null){const te=y.value!==!0?O.value===!0:W.value.am.values.length!==0&&W.value.pm.values.length!==0?ae>=i.dist:W.value.am.values.length!==0;q=$e(q+(te===!0?0:12),W.value[te===!0?"am":"pm"])}else q=Math.round(q),y.value===!0?ae<i.dist?q<12&&(q+=12):q===12&&(q=0):O.value===!0&&q===12?q=0:O.value===!1&&q!==12&&(q+=12);y.value===!0&&(O.value=q<12)}else q=Math.round(E/6)%60,k.value==="minute"&&ce.value!==null?q=$e(q,ce.value):k.value==="second"&&R.value!==null&&(q=$e(q,R.value));return _!==q&&Le[k.value](q),q}const Z={hour(){k.value="hour"},minute(){k.value="minute"},second(){k.value="second"}};function je(l){l.keyCode===13&&Ae()}function Ce(l){l.keyCode===13&&Je()}function We(l){Ye()!==!0&&(d.platform.is.desktop!==!0&&B(l,Ue()),Xe())}function _e(l){Ye()!==!0&&B(l,Ue())}function ee(l){if(l.keyCode===13)k.value="hour";else if([37,39].includes(l.keyCode)){const i=l.keyCode===37?-1:1;if(W.value!==null){const _=y.value===!0?W.value.values:W.value[O.value===!0?"am":"pm"].values;if(_.length===0)return;if(u.value.hour===null)Se(_[0]);else{const S=(_.length+_.indexOf(u.value.hour)+i)%_.length;Se(_[S])}}else{const _=y.value===!0?24:12,S=y.value!==!0&&O.value===!1?12:0,P=u.value.hour===null?-i:u.value.hour;Se(S+(24+P+i)%_)}}}function ut(l){if(l.keyCode===13)k.value="minute";else if([37,39].includes(l.keyCode)){const i=l.keyCode===37?-1:1;if(ce.value!==null){const _=ce.value.values;if(_.length===0)return;if(u.value.minute===null)we(_[0]);else{const S=(_.length+_.indexOf(u.value.minute)+i)%_.length;we(_[S])}}else{const _=u.value.minute===null?-i:u.value.minute;we((60+_+i)%60)}}}function rt(l){if(l.keyCode===13)k.value="second";else if([37,39].includes(l.keyCode)){const i=l.keyCode===37?-1:1;if(R.value!==null){const _=R.value.values;if(_.length===0)return;if(u.value.seconds===null)qe(_[0]);else{const S=(_.length+_.indexOf(u.value.second)+i)%_.length;qe(_[S])}}else{const _=u.value.second===null?-i:u.value.second;qe((60+_+i)%60)}}}function Se(l){u.value.hour!==l&&(u.value.hour=l,de())}function we(l){u.value.minute!==l&&(u.value.minute=l,de())}function qe(l){u.value.second!==l&&(u.value.second=l,de())}const Le={hour:Se,minute:we,second:qe};function Ae(){O.value===!1&&(O.value=!0,u.value.hour!==null&&(u.value.hour-=12,de()))}function Je(){O.value===!0&&(O.value=!1,u.value.hour!==null&&(u.value.hour+=12,de()))}function Fe(l){const i=e.modelValue;k.value!==l&&i!==void 0&&i!==null&&i!==""&&typeof i!="string"&&(k.value=l)}function de(){if(oe.value!==null&&oe.value(u.value.hour)!==!0){u.value=Ze(),Fe("hour");return}if(G.value!==null&&G.value(u.value.minute)!==!0){u.value.minute=null,u.value.second=null,Fe("minute");return}if(e.withSeconds===!0&&ue.value!==null&&ue.value(u.value.second)!==!0){u.value.second=null,Fe("second");return}u.value.hour===null||u.value.minute===null||e.withSeconds===!0&&u.value.second===null||Pe()}function Pe(l){const i=Object.assign({...u.value},l),_=e.calendar==="persian"?I(i.hour)+":"+I(i.minute)+(e.withSeconds===!0?":"+I(i.second):""):Zt(new Date(i.year,i.month===null?null:i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond),H.value,V.value,i.year,i.timezoneOffset);i.changed=_!==e.modelValue,c("update:modelValue",_,i)}function Ge(){const l=[m("div",{class:"q-time__link "+(k.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:w.value,onClick:Z.hour,onKeyup:ee},x.value.hour),m("div",":"),m("div",ne.value===!0?{class:"q-time__link "+(k.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:w.value,onKeyup:ut,onClick:Z.minute}:{class:"q-time__link"},x.value.minute)];e.withSeconds===!0&&l.push(m("div",":"),m("div",Q.value===!0?{class:"q-time__link "+(k.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:w.value,onKeyup:rt,onClick:Z.second}:{class:"q-time__link"},x.value.second));const i=[m("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},l)];return y.value===!1&&i.push(m("div",{class:"q-time__header-ampm column items-between no-wrap"},[m("div",{class:"q-time__link "+(O.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:w.value,onClick:Ae,onKeyup:je},"AM"),m("div",{class:"q-time__link "+(O.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:w.value,onClick:Je,onKeyup:Ce},"PM")])),m("div",{class:"q-time__header flex flex-center no-wrap "+v.value},i)}function Ee(){const l=u.value[k.value];return m("div",{class:"q-time__content col relative-position"},[m(Ve,{name:"q-transition--scale"},()=>m("div",{key:"clock"+k.value,class:"q-time__container-parent absolute-full"},[m("div",{ref:F,class:"q-time__container-child fit overflow-hidden"},[Qe(m("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:We,onMousedown:_e},[m("div",{class:"q-time__clock-circle fit"},[m("div",{class:"q-time__clock-pointer"+(u.value[k.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:T.value}),ke.value.map(i=>m("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${i.index}`+(i.val===l?" q-time__clock-position--active "+v.value:i.disable===!0?" q-time__clock-position--disable":"")},[m("span",i.label)]))])]),Ne.value)])])),e.nowBtn===!0?m(J,{class:"q-time__now-button absolute",icon:d.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:w.value,onClick:ye}):null])}return s.proxy.setNow=ye,()=>{const l=[Ee()],i=Ut(o.default);return i!==void 0&&l.push(m("div",{class:"q-time__actions"},i)),e.name!==void 0&&e.disable!==!0&&p(l,"push"),m("div",{class:ge.value,tabindex:-1},[Ge(),m("div",{class:"q-time__main col overflow-auto"},l)])}}});function Tt(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}const at=ln({name:"close-popup",beforeMount(e,{value:o}){const c={depth:Tt(o),handler(s){c.depth!==0&&setTimeout(()=>{const d=un(e);d!==void 0&&rn(d,s,c.depth)})},handlerKey(s){on(s,13)===!0&&c.handler(s)}};e.__qclosepopup=c,e.addEventListener("click",c.handler),e.addEventListener("keyup",c.handlerKey)},updated(e,{value:o,oldValue:c}){o!==c&&(e.__qclosepopup.depth=Tt(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}}),Ln={class:"col q-gutter-md q-pa-md"},An={class:"row"},Fn={class:"row items-center justify-end"},Pn={class:"row items-center justify-end"},En={class:"row"},zn={class:"row items-center justify-end"},Bn={class:"row items-center justify-end"},Jn=sn({__name:"TimestampPage",setup(e){const{t:o}=cn();class c{label;nanoseconds;nbNanosecondsDigits;constructor(y,T){this.label=y,this.nanoseconds=T,this.nbNanosecondsDigits=Math.floor(Math.log10(T))}getLabel(){return this.label}fromNanoseconds(y){return y/this.nanoseconds}toNanoseconds(y){return y*this.nanoseconds}toMilliseconds(y){return y*this.nanoseconds/1e6}}const s=new c("ns",1),d=new c("s",1e9),r=new c("ms",1e6),w=new c("µs",1e3);class v extends c{knownUnits;nbDigitsNowNs;lastUnit;constructor(y,T){super(y,0),this.knownUnits=T;const ne=new Date().getTime();this.nbDigitsNowNs=Math.floor(Math.log10(r.toNanoseconds(ne))),this.lastUnit=r,this.autoUnit(ne)}detectUnit(y){const T=Math.floor(Math.log10(Math.abs(y))),Q=this.knownUnits.filter(oe=>T<=this.nbDigitsNowNs-oe.nbNanosecondsDigits).sort((oe,G)=>G.nanoseconds-oe.nanoseconds)[0];return Q||s}getLabel(){return o("autoPrecisionLabel",{subUnit:this.lastUnit.label})}autoUnit(y){const T=this.detectUnit(y);return this.label=o("autoPrecisionLabel",{subUnit:T.label}),this.lastUnit=T,T}fromNanoseconds(y){return this.lastUnit.fromNanoseconds(y)}toNanoseconds(y){return this.autoUnit(y).toNanoseconds(y)}toMilliseconds(y){return this.autoUnit(y).toMilliseconds(y)}}const M=new v("Auto",[d,r,w,s]),N=[M,...M.knownUnits],g=A(r.toNanoseconds(new Date().getTime())),p=A(M);function K(){g.value=r.toNanoseconds(new Date().getTime())}const L=A(new Date().getTime()),F=A(""),H=A(""),V=Intl.supportedValuesOf("timeZone"),he=A(V),X=A(Intl.DateTimeFormat().resolvedOptions().timeZone);ie(g,x=>{if(isFinite(x)){const y=new Date(s.toMilliseconds(x));L.value=Math.floor(p.value.fromNanoseconds(x)),F.value=xn(y),H.value=kt(y,X.value)}},{immediate:!0}),ie(X,()=>{H.value=kt(new Date(s.toMilliseconds(g.value)),X.value)});function k(x,y){x==""?y(()=>{he.value=V}):y(()=>{const T=x.toLowerCase();he.value=V.filter(ne=>ne.toLowerCase().includes(T))})}function u(x){x!=null&&(typeof x=="string"&&(x=parseInt(x)),isFinite(x)&&(g.value=p.value.toNanoseconds(x)))}function O(x){if(x==null)return;const y=new Date(x);if(y!==void 0){const T=y.getTime()-y.getTimezoneOffset()*6e4;isNaN(T)||(g.value=r.toNanoseconds(T))}}function ge(x){if(x==null)return;const y=new Date(x);y!==void 0&&(g.value=r.toNanoseconds(y.getTime()))}return(x,y)=>(vn(),dn(pn,{padding:""},{default:z(()=>[pe("div",Ln,[pe("div",An,[U(dt,{class:"col",modelValue:L.value,"onUpdate:modelValue":[y[1]||(y[1]=T=>L.value=T),u],modelModifiers:{number:!0},type:"number",inputmode:"numeric",label:x.$t("unixLabel")},{prepend:z(()=>[U(Be,{name:"history",onClick:y[0]||(y[0]=T=>K())})]),_:1},8,["modelValue","label"]),U(pt,{class:"col q-px-md",modelValue:p.value,"onUpdate:modelValue":y[2]||(y[2]=T=>p.value=T),options:N,"option-label":T=>T.getLabel(),label:x.$t("unixPrecisionLabel")},null,8,["modelValue","option-label","label"])]),U(dt,{modelValue:F.value,"onUpdate:modelValue":[y[3]||(y[3]=T=>F.value=T),O],label:x.$t("utcLabel"),hint:x.$t("utcHint")},{prepend:z(()=>[U(Be,{name:"event",class:"cursor-pointer"},{default:z(()=>[U(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:z(()=>[U(qt,{"model-value":F.value,mask:"YYYY-MM-DD HH:mm:ss","onUpdate:modelValue":O,"today-btn":!0},{default:z(()=>[pe("div",Fn,[Qe(U(J,{label:"Close",color:"primary",flat:""},null,512),[[at]])])]),_:1},8,["model-value"])]),_:1})]),_:1})]),append:z(()=>[U(Be,{name:"access_time",class:"cursor-pointer"},{default:z(()=>[U(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:z(()=>[U(Ht,{"model-value":F.value,mask:"YYYY-MM-DD HH:mm:ss","onUpdate:modelValue":O,"now-btn":!0},{default:z(()=>[pe("div",Pn,[Qe(U(J,{label:"Close",color:"primary",flat:""},null,512),[[at]])])]),_:1},8,["model-value"])]),_:1})]),_:1})]),_:1},8,["modelValue","label","hint"]),pe("div",En,[U(dt,{class:"col",modelValue:H.value,"onUpdate:modelValue":[y[4]||(y[4]=T=>H.value=T),ge],label:x.$t("localDateLabel"),hint:x.$t("localDateHint",{tzName:X.value,utcOffset:fn(kn)(new Date(L.value),X.value)})},{prepend:z(()=>[U(Be,{name:"event",class:"cursor-pointer"},{default:z(()=>[U(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:z(()=>[U(qt,{"model-value":H.value,mask:"YYYY-MM-DD HH:mm:ss","onUpdate:modelValue":ge,"today-btn":!0},{default:z(()=>[pe("div",zn,[Qe(U(J,{label:"Close",color:"primary",flat:""},null,512),[[at]])])]),_:1},8,["model-value"])]),_:1})]),_:1})]),append:z(()=>[U(Be,{name:"access_time",class:"cursor-pointer"},{default:z(()=>[U(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:z(()=>[U(Ht,{"model-value":H.value,mask:"YYYY-MM-DD HH:mm:ss","onUpdate:modelValue":ge,"now-btn":!0},{default:z(()=>[pe("div",Bn,[Qe(U(J,{label:"Close",color:"primary",flat:""},null,512),[[at]])])]),_:1},8,["model-value"])]),_:1})]),_:1})]),_:1},8,["modelValue","label","hint"]),U(pt,{class:"col q-mx-md",modelValue:X.value,"onUpdate:modelValue":y[6]||(y[6]=T=>X.value=T),options:he.value,label:x.$t("timezoneLabel"),"use-input":"","input-debounce":"0",onFilter:k},{append:z(()=>[U(J,{icon:"public",flat:"",onClick:y[5]||(y[5]=hn(T=>X.value=Intl.DateTimeFormat().resolvedOptions().timeZone,["prevent"]))})]),"no-option":z(()=>[U(Dn,null,{default:z(()=>[U(bn,{class:"text-grey"},{default:z(()=>y[7]||(y[7]=[mn(" No results ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","label"])])])]),_:1}))}});export{Jn as default};
