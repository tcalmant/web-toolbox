import{c as D,$ as Ot,a0 as Jt,k as Mt,x as It,a1 as Vt,g as Dt,z as Nt,a2 as Ut,r as L,a3 as Gt,w as ie,E as gt,h as m,a4 as Ve,l as $t,a5 as jt,W as X,a6 as en,a7 as tn,a8 as nn,a9 as an,G as ze,aa as ln,ab as on,ac as un,ad as rn,d as sn,O as cn,Q as B,P as dn,ae as xe,f as $,af as dt,S as Qe,ag as vn,U as fn,ah as mn}from"./index-CXapgAUu.js";import{u as hn,a as gn,Q as yn,b as Mn,c as xt}from"./QPage-BXV-IjvP.js";import{u as Dn}from"./use-render-cache-DLxPkVnQ.js";import{p as T,Q as _n,a as bn}from"./QItem-B7mX5L01.js";import{T as wn}from"./TouchPan-CAcg4fi0.js";import{f as xn,d as pn,a as pt}from"./timeUtils-B2Ku6ijV.js";const De=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function kn(e,l,c){return Object.prototype.toString.call(e)==="[object Date]"&&(c=e.getDate(),l=e.getMonth()+1,e=e.getFullYear()),qn(_t(e,l,c))}function kt(e,l,c){return Ft(Sn(e,l,c))}function Yn(e){return Cn(e)===0}function lt(e,l){return l<=6?31:l<=11||Yn(e)?30:29}function Cn(e){const l=De.length;let c=De[0],d,r,s,w,v;if(e<c||e>=De[l-1])throw new Error("Invalid Jalaali year "+e);for(v=1;v<l&&(d=De[v],r=d-c,!(e<d));v+=1)c=d;return w=e-c,r-w<6&&(w=w-r+j(r+4,33)*33),s=ne(ne(w+1,33)-1,4),s===-1&&(s=4),s}function At(e,l){const c=De.length,d=e+621;let r=-14,s=De[0],w,v,_,O,g;if(e<s||e>=De[c-1])throw new Error("Invalid Jalaali year "+e);for(g=1;g<c&&(w=De[g],v=w-s,!(e<w));g+=1)r=r+j(v,33)*8+j(ne(v,33),4),s=w;O=e-s,r=r+j(O,33)*8+j(ne(O,33)+3,4),ne(v,33)===4&&v-O===4&&(r+=1);const p=j(d,4)-j((j(d,100)+1)*3,4)-150,Q=20+r-p;return l||(v-O<6&&(O=O-v+j(v+4,33)*33),_=ne(ne(O+1,33)-1,4),_===-1&&(_=4)),{leap:_,gy:d,march:Q}}function Sn(e,l,c){const d=At(e,!0);return _t(d.gy,3,d.march)+(l-1)*31-j(l,7)*(l-7)+c-1}function qn(e){const l=Ft(e).gy;let c=l-621,d,r,s;const w=At(c,!1),v=_t(l,3,w.march);if(s=e-v,s>=0){if(s<=185)return r=1+j(s,31),d=ne(s,31)+1,{jy:c,jm:r,jd:d};s-=186}else c-=1,s+=179,w.leap===1&&(s+=1);return r=7+j(s,30),d=ne(s,30)+1,{jy:c,jm:r,jd:d}}function _t(e,l,c){let d=j((e+j(l-8,6)+100100)*1461,4)+j(153*ne(l+9,12)+2,5)+c-34840408;return d=d-j(j(e+100100+j(l-8,6),100)*3,4)+752,d}function Ft(e){let l=4*e+139361631;l=l+j(j(4*e+183187720,146097)*3,4)*4-3908;const c=j(ne(l,1461),4)*5+308,d=j(ne(c,153),5)+1,r=ne(j(c,153),12)+1;return{gy:j(l,1461)-100100+j(8-r,6),gm:r,gd:d}}function j(e,l){return~~(e/l)}function ne(e,l){return e-~~(e/l)*l}const Hn=["gregorian","persian"],ot={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Hn.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Lt=["update:modelValue"];function me(e){return e.year+"/"+T(e.month)+"/"+T(e.day)}function Pt(e,l){const c=D(()=>e.disable!==!0&&e.readonly!==!0),d=D(()=>c.value===!0?0:-1),r=D(()=>{const v=[];return e.color!==void 0&&v.push(`bg-${e.color}`),e.textColor!==void 0&&v.push(`text-${e.textColor}`),v.join(" ")});function s(){return e.locale!==void 0?{...l.lang.date,...e.locale}:l.lang.date}function w(v){const _=new Date,O=v===!0?null:0;if(e.calendar==="persian"){const g=kn(_);return{year:g.jy,month:g.jm,day:g.jd}}return{year:_.getFullYear(),month:_.getMonth()+1,day:_.getDate(),hour:O,minute:O,second:O,millisecond:O}}return{editable:c,tabindex:d,headerClass:r,getLocale:s,getCurrentDate:w}}const Et=864e5,Tn=36e5,yt=6e4,Bt="YYYY-MM-DDTHH:mm:ss.SSSZ",On=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,In=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,vt={};function Vn(e,l){const c="("+l.days.join("|")+")",d=e+c;if(vt[d]!==void 0)return vt[d];const r="("+l.daysShort.join("|")+")",s="("+l.months.join("|")+")",w="("+l.monthsShort.join("|")+")",v={};let _=0;const O=e.replace(In,p=>{switch(_++,p){case"YY":return v.YY=_,"(-?\\d{1,2})";case"YYYY":return v.YYYY=_,"(-?\\d{1,4})";case"M":return v.M=_,"(\\d{1,2})";case"Mo":return v.M=_++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return v.M=_,"(\\d{2})";case"MMM":return v.MMM=_,w;case"MMMM":return v.MMMM=_,s;case"D":return v.D=_,"(\\d{1,2})";case"Do":return v.D=_++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return v.D=_,"(\\d{2})";case"H":return v.H=_,"(\\d{1,2})";case"HH":return v.H=_,"(\\d{2})";case"h":return v.h=_,"(\\d{1,2})";case"hh":return v.h=_,"(\\d{2})";case"m":return v.m=_,"(\\d{1,2})";case"mm":return v.m=_,"(\\d{2})";case"s":return v.s=_,"(\\d{1,2})";case"ss":return v.s=_,"(\\d{2})";case"S":return v.S=_,"(\\d{1})";case"SS":return v.S=_,"(\\d{2})";case"SSS":return v.S=_,"(\\d{3})";case"A":return v.A=_,"(AM|PM)";case"a":return v.a=_,"(am|pm)";case"aa":return v.aa=_,"(a\\.m\\.|p\\.m\\.)";case"ddd":return r;case"dddd":return c;case"Q":case"d":case"E":return"(\\d{1})";case"do":return _++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return _++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return _++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return v.Z=_,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return v.ZZ=_,"(Z|[+-]\\d{2}\\d{2})";case"X":return v.X=_,"(-?\\d+)";case"x":return v.x=_,"(-?\\d{4,})";default:return _--,p[0]==="["&&(p=p.substring(1,p.length-1)),p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),g={map:v,regex:new RegExp("^"+O)};return vt[d]=g,g}function Qt(e,l){return e!==void 0?e:l!==void 0?l.date:Jt.date}function Yt(e,l=""){const c=e>0?"-":"+",d=Math.abs(e),r=Math.floor(d/60),s=d%60;return c+T(r)+l+T(s)}function Ze(e,l,c,d,r){const s={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(r!==void 0&&Object.assign(s,r),e==null||e===""||typeof e!="string")return s;l===void 0&&(l=Bt);const w=Qt(c,Ot.props),v=w.months,_=w.monthsShort,{regex:O,map:g}=Vn(l,w),p=e.match(O);if(p===null)return s;let Q="";if(g.X!==void 0||g.x!==void 0){const A=parseInt(p[g.X!==void 0?g.X:g.x],10);if(isNaN(A)===!0||A<0)return s;const F=new Date(A*(g.X!==void 0?1e3:1));s.year=F.getFullYear(),s.month=F.getMonth()+1,s.day=F.getDate(),s.hour=F.getHours(),s.minute=F.getMinutes(),s.second=F.getSeconds(),s.millisecond=F.getMilliseconds()}else{if(g.YYYY!==void 0)s.year=parseInt(p[g.YYYY],10);else if(g.YY!==void 0){const A=parseInt(p[g.YY],10);s.year=A<0?A:2e3+A}if(g.M!==void 0){if(s.month=parseInt(p[g.M],10),s.month<1||s.month>12)return s}else g.MMM!==void 0?s.month=_.indexOf(p[g.MMM])+1:g.MMMM!==void 0&&(s.month=v.indexOf(p[g.MMMM])+1);if(g.D!==void 0){if(s.day=parseInt(p[g.D],10),s.year===null||s.month===null||s.day<1)return s;const A=d!=="persian"?new Date(s.year,s.month,0).getDate():lt(s.year,s.month);if(s.day>A)return s}g.H!==void 0?s.hour=parseInt(p[g.H],10)%24:g.h!==void 0&&(s.hour=parseInt(p[g.h],10)%12,(g.A&&p[g.A]==="PM"||g.a&&p[g.a]==="pm"||g.aa&&p[g.aa]==="p.m.")&&(s.hour+=12),s.hour=s.hour%24),g.m!==void 0&&(s.minute=parseInt(p[g.m],10)%60),g.s!==void 0&&(s.second=parseInt(p[g.s],10)%60),g.S!==void 0&&(s.millisecond=parseInt(p[g.S],10)*10**(3-p[g.S].length)),(g.Z!==void 0||g.ZZ!==void 0)&&(Q=g.Z!==void 0?p[g.Z].replace(":",""):p[g.ZZ],s.timezoneOffset=(Q[0]==="+"?-1:1)*(60*Q.slice(1,3)+1*Q.slice(3,5)))}return s.dateHash=T(s.year,6)+"/"+T(s.month)+"/"+T(s.day),s.timeHash=T(s.hour)+":"+T(s.minute)+":"+T(s.second)+Q,s}function ft(e){const l=new Date(e.getFullYear(),e.getMonth(),e.getDate());l.setDate(l.getDate()-(l.getDay()+6)%7+3);const c=new Date(l.getFullYear(),0,4);c.setDate(c.getDate()-(c.getDay()+6)%7+3);const d=l.getTimezoneOffset()-c.getTimezoneOffset();l.setHours(l.getHours()-d);const r=(l-c)/(Et*7);return 1+Math.floor(r)}function he(e,l,c){const d=new Date(e),r=`set${c===!0?"UTC":""}`;switch(l){case"year":case"years":d[`${r}Month`](0);case"month":case"months":d[`${r}Date`](1);case"day":case"days":case"date":d[`${r}Hours`](0);case"hour":case"hours":d[`${r}Minutes`](0);case"minute":case"minutes":d[`${r}Seconds`](0);case"second":case"seconds":d[`${r}Milliseconds`](0)}return d}function tt(e,l,c){return(e.getTime()-e.getTimezoneOffset()*yt-(l.getTime()-l.getTimezoneOffset()*yt))/c}function zt(e,l,c="days"){const d=new Date(e),r=new Date(l);switch(c){case"years":case"year":return d.getFullYear()-r.getFullYear();case"months":case"month":return(d.getFullYear()-r.getFullYear())*12+d.getMonth()-r.getMonth();case"days":case"day":case"date":return tt(he(d,"day"),he(r,"day"),Et);case"hours":case"hour":return tt(he(d,"hour"),he(r,"hour"),Tn);case"minutes":case"minute":return tt(he(d,"minute"),he(r,"minute"),yt);case"seconds":case"second":return tt(he(d,"second"),he(r,"second"),1e3)}}function mt(e){return zt(e,he(e,"year"),"days")+1}function Oe(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Ct={YY(e,l,c){const d=this.YYYY(e,l,c)%100;return d>=0?T(d):"-"+T(Math.abs(d))},YYYY(e,l,c){return c??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return Oe(e.getMonth()+1)},MM(e){return T(e.getMonth()+1)},MMM(e,l){return l.monthsShort[e.getMonth()]},MMMM(e,l){return l.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return Oe(this.Q(e))},D(e){return e.getDate()},Do(e){return Oe(e.getDate())},DD(e){return T(e.getDate())},DDD(e){return mt(e)},DDDo(e){return Oe(mt(e))},DDDD(e){return T(mt(e),3)},d(e){return e.getDay()},do(e){return Oe(e.getDay())},dd(e,l){return l.days[e.getDay()].slice(0,2)},ddd(e,l){return l.daysShort[e.getDay()]},dddd(e,l){return l.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return ft(e)},wo(e){return Oe(ft(e))},ww(e){return T(ft(e))},H(e){return e.getHours()},HH(e){return T(e.getHours())},h(e){const l=e.getHours();return l===0?12:l>12?l%12:l},hh(e){return T(this.h(e))},m(e){return e.getMinutes()},mm(e){return T(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return T(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return T(Math.floor(e.getMilliseconds()/10))},SSS(e){return T(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,l,c,d){const r=d??e.getTimezoneOffset();return Yt(r,":")},ZZ(e,l,c,d){const r=d??e.getTimezoneOffset();return Yt(r)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Zt(e,l,c,d,r){if(e!==0&&!e||e===1/0||e===-1/0)return;const s=new Date(e);if(isNaN(s))return;l===void 0&&(l=Bt);const w=Qt(c,Ot.props);return l.replace(On,(v,_)=>v in Ct?Ct[v](s,w,d,r):_===void 0?v:_.split("\\]").join("]"))}const fe=20,Nn=["Calendar","Years","Months"],St=e=>Nn.includes(e),ht=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ie=" — ";function Me(e){return e.year+"/"+T(e.month)}const qt=Mt({name:"QDate",props:{...ot,...Vt,...It,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...ot.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ht},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ht},navigationMaxYearMonth:{type:String,validator:ht},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:St}},emits:[...Lt,"rangeStart","rangeEnd","navigation"],setup(e,{slots:l,emit:c}){const{proxy:d}=Dt(),{$q:r}=d,s=Nt(e,r),{getCache:w}=Dn(),{tabindex:v,headerClass:_,getLocale:O,getCurrentDate:g}=Pt(e,r);let p;const Q=Ut(e),A=jt(Q),F=L(null),I=L(Ge()),V=L(O()),ee=D(()=>Ge()),ge=D(()=>O()),k=D(()=>g()),u=L(o(I.value,V.value)),H=L(e.defaultView),N=D(()=>r.lang.rtl===!0?"right":"left"),y=L(N.value),x=L(N.value),le=u.value.year,re=L(le-le%fe-(le<0?fe:0)),z=L(null),ce=D(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(s.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ae=D(()=>e.color||"primary"),oe=D(()=>e.textColor||"white"),W=D(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),de=D(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),R=D(()=>de.value.filter(t=>typeof t=="string").map(t=>Ee(t,I.value,V.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),ue=D(()=>{const t=n=>Ee(n,I.value,V.value);return de.value.filter(n=>Gt(n)===!0&&n.from!==void 0&&n.to!==void 0).map(n=>({from:t(n.from),to:t(n.to)})).filter(n=>n.from.dateHash!==null&&n.to.dateHash!==null&&n.from.dateHash<n.to.dateHash)}),pe=D(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const n=kt(t.year,t.month,t.day);return new Date(n.gy,n.gm-1,n.gd)}),Ne=D(()=>e.calendar==="persian"?me:(t,n,a)=>Zt(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),n===void 0?I.value:n,a===void 0?V.value:a,t.year,t.timezoneOffset)),ye=D(()=>R.value.length+ue.value.reduce((t,n)=>t+1+zt(pe.value(n.to),pe.value(n.from)),0)),_e=D(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(z.value!==null){const a=z.value.init,f=pe.value(a);return V.value.daysShort[f.getDay()]+", "+V.value.monthsShort[a.month-1]+" "+a.day+Ie+"?"}if(ye.value===0)return Ie;if(ye.value>1)return`${ye.value} ${V.value.pluralDay}`;const t=R.value[0],n=pe.value(t);return isNaN(n.valueOf())===!0?Ie:V.value.headerTitle!==void 0?V.value.headerTitle(n,t):V.value.daysShort[n.getDay()]+", "+V.value.monthsShort[t.month-1]+" "+t.day}),Ke=D(()=>R.value.concat(ue.value.map(n=>n.from)).sort((n,a)=>n.year-a.year||n.month-a.month)[0]),Ue=D(()=>R.value.concat(ue.value.map(n=>n.to)).sort((n,a)=>a.year-n.year||a.month-n.month)[0]),Re=D(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(ye.value===0)return Ie;if(ye.value>1){const t=Ke.value,n=Ue.value,a=V.value.monthsShort;return a[t.month-1]+(t.year!==n.year?" "+t.year+Ie+a[n.month-1]+" ":t.month!==n.month?Ie+a[n.month-1]:"")+" "+n.year}return R.value[0].year}),ke=D(()=>{const t=[r.iconSet.datetime.arrowLeft,r.iconSet.datetime.arrowRight];return r.lang.rtl===!0?t.reverse():t}),Ye=D(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):V.value.firstDayOfWeek),$e=D(()=>{const t=V.value.daysShort,n=Ye.value;return n>0?t.slice(n,7).concat(t.slice(0,n)):t}),se=D(()=>{const t=u.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():lt(t.year,t.month)}),We=D(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),Z=D(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),K=D(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),je=D(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return Z.value!==null&&Z.value.year>=u.value.year&&(t.year.prev=!1,Z.value.year===u.value.year&&Z.value.month>=u.value.month&&(t.month.prev=!1)),K.value!==null&&K.value.year<=u.value.year&&(t.year.next=!1,K.value.year===u.value.year&&K.value.month<=u.value.month&&(t.month.next=!1)),t}),Ce=D(()=>{const t={};return R.value.forEach(n=>{const a=Me(n);t[a]===void 0&&(t[a]=[]),t[a].push(n.day)}),t}),Xe=D(()=>{const t={};return ue.value.forEach(n=>{const a=Me(n.from),f=Me(n.to);if(t[a]===void 0&&(t[a]=[]),t[a].push({from:n.from.day,to:a===f?n.to.day:void 0,range:n}),a<f){let h;const{year:C,month:M}=n.from,Y=M<12?{year:C,month:M+1}:{year:C+1,month:1};for(;(h=Me(Y))<=f;)t[h]===void 0&&(t[h]=[]),t[h].push({from:void 0,to:h===f?n.to.day:void 0,range:n}),Y.month++,Y.month>12&&(Y.year++,Y.month=1)}}),t}),be=D(()=>{if(z.value===null)return;const{init:t,initHash:n,final:a,finalHash:f}=z.value,[h,C]=n<=f?[t,a]:[a,t],M=Me(h),Y=Me(C);if(M!==J.value&&Y!==J.value)return;const U={};return M===J.value?(U.from=h.day,U.includeFrom=!0):U.from=1,Y===J.value?(U.to=C.day,U.includeTo=!0):U.to=se.value,U}),J=D(()=>Me(u.value)),ut=D(()=>{const t={};if(e.options===void 0){for(let a=1;a<=se.value;a++)t[a]=!0;return t}const n=typeof e.options=="function"?e.options:a=>e.options.includes(a);for(let a=1;a<=se.value;a++){const f=J.value+"/"+T(a);t[a]=n(f)}return t}),rt=D(()=>{const t={};if(e.events===void 0)for(let n=1;n<=se.value;n++)t[n]=!1;else{const n=typeof e.events=="function"?e.events:a=>e.events.includes(a);for(let a=1;a<=se.value;a++){const f=J.value+"/"+T(a);t[a]=n(f)===!0&&We.value(f)}}return t}),Se=D(()=>{let t,n;const{year:a,month:f}=u.value;if(e.calendar!=="persian")t=new Date(a,f-1,1),n=new Date(a,f-1,0).getDate();else{const h=kt(a,f,1);t=new Date(h.gy,h.gm-1,h.gd);let C=f-1,M=a;C===0&&(C=12,M--),n=lt(M,C)}return{days:t.getDay()-Ye.value-1,endDay:n}}),we=D(()=>{const t=[],{days:n,endDay:a}=Se.value,f=n<0?n+7:n;if(f<6)for(let M=a-f;M<=a;M++)t.push({i:M,fill:!0});const h=t.length;for(let M=1;M<=se.value;M++){const Y={i:M,event:rt.value[M],classes:[]};ut.value[M]===!0&&(Y.in=!0,Y.flat=!0),t.push(Y)}if(Ce.value[J.value]!==void 0&&Ce.value[J.value].forEach(M=>{const Y=h+M-1;Object.assign(t[Y],{selected:!0,unelevated:!0,flat:!1,color:ae.value,textColor:oe.value})}),Xe.value[J.value]!==void 0&&Xe.value[J.value].forEach(M=>{if(M.from!==void 0){const Y=h+M.from-1,U=h+(M.to||se.value)-1;for(let Be=Y;Be<=U;Be++)Object.assign(t[Be],{range:M.range,unelevated:!0,color:ae.value,textColor:oe.value});Object.assign(t[Y],{rangeFrom:!0,flat:!1}),M.to!==void 0&&Object.assign(t[U],{rangeTo:!0,flat:!1})}else if(M.to!==void 0){const Y=h+M.to-1;for(let U=h;U<=Y;U++)Object.assign(t[U],{range:M.range,unelevated:!0,color:ae.value,textColor:oe.value});Object.assign(t[Y],{flat:!1,rangeTo:!0})}else{const Y=h+se.value-1;for(let U=h;U<=Y;U++)Object.assign(t[U],{range:M.range,unelevated:!0,color:ae.value,textColor:oe.value})}}),be.value!==void 0){const M=h+be.value.from-1,Y=h+be.value.to-1;for(let U=M;U<=Y;U++)t[U].color=ae.value,t[U].editRange=!0;be.value.includeFrom===!0&&(t[M].editRangeFrom=!0),be.value.includeTo===!0&&(t[Y].editRangeTo=!0)}u.value.year===k.value.year&&u.value.month===k.value.month&&(t[h+k.value.day-1].today=!0);const C=t.length%7;if(C>0){const M=7-C;for(let Y=1;Y<=M;Y++)t.push({i:Y,fill:!0})}return t.forEach(M=>{let Y="q-date__calendar-item ";M.fill===!0?Y+="q-date__calendar-item--fill":(Y+=`q-date__calendar-item--${M.in===!0?"in":"out"}`,M.range!==void 0&&(Y+=` q-date__range${M.rangeTo===!0?"-to":M.rangeFrom===!0?"-from":""}`),M.editRange===!0&&(Y+=` q-date__edit-range${M.editRangeFrom===!0?"-from":""}${M.editRangeTo===!0?"-to":""}`),(M.range!==void 0||M.editRange===!0)&&(Y+=` text-${M.color}`)),M.classes=Y}),t}),qe=D(()=>e.disable===!0?{"aria-disabled":"true"}:{});ie(()=>e.modelValue,t=>{if(p===JSON.stringify(t))p=0;else{const n=o(I.value,V.value);G(n.year,n.month,n)}}),ie(H,()=>{F.value!==null&&d.$el.contains(document.activeElement)===!0&&F.value.focus()}),ie(()=>u.value.year+"|"+u.value.month,()=>{c("navigation",{year:u.value.year,month:u.value.month})}),ie(ee,t=>{wt(t,V.value,"mask"),I.value=t}),ie(ge,t=>{wt(I.value,t,"locale"),V.value=t});function Ae(t){p=JSON.stringify(t)}function Fe(){const{year:t,month:n,day:a}=k.value,f={...u.value,year:t,month:n,day:a},h=Ce.value[Me(f)];(h===void 0||h.includes(f.day)===!1)&&st(f),ve(f.year,f.month)}function Je(t){St(t)===!0&&(H.value=t)}function Le(t,n){["month","year"].includes(t)&&(t==="month"?b:S)(n===!0?-1:1)}function ve(t,n){H.value="Calendar",G(t,n)}function Pe(t,n){if(e.range===!1||!t){z.value=null;return}const a=Object.assign({...u.value},t),f=n!==void 0?Object.assign({...u.value},n):a;z.value={init:a,initHash:me(a),final:f,finalHash:me(f)},ve(a.year,a.month)}function Ge(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ee(t,n,a){return Ze(t,n,a,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function o(t,n){const a=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(a.length===0)return i();const f=a[a.length-1],h=Ee(f.from!==void 0?f.from:f,t,n);return h.dateHash===null?i():h}function i(){let t,n;if(e.defaultYearMonth!==void 0){const a=e.defaultYearMonth.split("/");t=parseInt(a[0],10),n=parseInt(a[1],10)}else{const a=k.value!==void 0?k.value:g();t=a.year,n=a.month}return{year:t,month:n,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+T(n)+"/01"}}function b(t){let n=u.value.year,a=Number(u.value.month)+t;a===13?(a=1,n++):a===0&&(a=12,n--),G(n,a),W.value===!0&&He("month")}function S(t){const n=Number(u.value.year)+t;G(n,u.value.month),W.value===!0&&He("year")}function P(t){G(t,u.value.month),H.value=e.defaultView==="Years"?"Months":"Calendar",W.value===!0&&He("year")}function te(t){G(u.value.year,t),H.value="Calendar",W.value===!0&&He("month")}function q(t,n){(Ce.value[n]?.includes(t.day)===!0?it:st)(t)}function E(t){return{year:t.year,month:t.month,day:t.day}}function G(t,n,a){if(Z.value!==null&&t<=Z.value.year&&((n<Z.value.month||t<Z.value.year)&&(n=Z.value.month),t=Z.value.year),K.value!==null&&t>=K.value.year&&((n>K.value.month||t>K.value.year)&&(n=K.value.month),t=K.value.year),a!==void 0){const{hour:h,minute:C,second:M,millisecond:Y,timezoneOffset:U,timeHash:Be}=a;Object.assign(u.value,{hour:h,minute:C,second:M,millisecond:Y,timezoneOffset:U,timeHash:Be})}const f=t+"/"+T(n)+"/01";f!==u.value.dateHash&&(y.value=u.value.dateHash<f==(r.lang.rtl!==!0)?"left":"right",t!==u.value.year&&(x.value=y.value),gt(()=>{re.value=t-t%fe-(t<0?fe:0),Object.assign(u.value,{year:t,month:n,day:1,dateHash:f})}))}function et(t,n,a){const f=t!==null&&t.length===1&&e.multiple===!1?t[0]:t,{reason:h,details:C}=bt(n,a);Ae(f),c("update:modelValue",f,h,C)}function He(t){const n=R.value[0]!==void 0&&R.value[0].dateHash!==null?{...R.value[0]}:{...u.value};gt(()=>{n.year=u.value.year,n.month=u.value.month;const a=e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():lt(n.year,n.month);n.day=Math.min(Math.max(1,n.day),a);const f=Te(n),{details:h}=bt("",n);Ae(f),c("update:modelValue",f,t,h)})}function bt(t,n){return n.from!==void 0?{reason:`${t}-range`,details:{...E(n.target),from:E(n.from),to:E(n.to)}}:{reason:`${t}-day`,details:E(n)}}function Te(t,n,a){return t.from!==void 0?{from:Ne.value(t.from,n,a),to:Ne.value(t.to,n,a)}:Ne.value(t,n,a)}function st(t){let n;if(e.multiple===!0)if(t.from!==void 0){const a=me(t.from),f=me(t.to),h=R.value.filter(M=>M.dateHash<a||M.dateHash>f),C=ue.value.filter(({from:M,to:Y})=>Y.dateHash<a||M.dateHash>f);n=h.concat(C).concat(t).map(M=>Te(M))}else{const a=de.value.slice();a.push(Te(t)),n=a}else n=Te(t);et(n,"add",t)}function it(t){if(e.noUnset===!0)return;let n=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const a=Te(t);t.from!==void 0?n=e.modelValue.filter(f=>f.from!==void 0?f.from!==a.from&&f.to!==a.to:!0):n=e.modelValue.filter(f=>f!==a),n.length===0&&(n=null)}et(n,"remove",t)}function wt(t,n,a){const f=R.value.concat(ue.value).map(C=>Te(C,t,n)).filter(C=>C.from!==void 0?C.from.dateHash!==null&&C.to.dateHash!==null:C.dateHash!==null),h=(e.multiple===!0?f:f[0])||null;Ae(h),c("update:modelValue",h,a)}function Kt(){if(e.minimal!==!0)return m("div",{class:"q-date__header "+_.value},[m("div",{class:"relative-position"},[m(Ve,{name:"q-transition--fade"},()=>m("div",{key:"h-yr-"+Re.value,class:"q-date__header-subtitle q-date__header-link "+(H.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:v.value,...w("vY",{onClick(){H.value="Years"},onKeyup(t){t.keyCode===13&&(H.value="Years")}})},[Re.value]))]),m("div",{class:"q-date__header-title relative-position flex no-wrap"},[m("div",{class:"relative-position col"},[m(Ve,{name:"q-transition--fade"},()=>m("div",{key:"h-sub"+_e.value,class:"q-date__header-title-label q-date__header-link "+(H.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:v.value,...w("vC",{onClick(){H.value="Calendar"},onKeyup(t){t.keyCode===13&&(H.value="Calendar")}})},[_e.value]))]),e.todayBtn===!0?m(X,{class:"q-date__header-today self-start",icon:r.iconSet.datetime.today,ariaLabel:r.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:v.value,onClick:Fe}):null])])}function ct({label:t,type:n,key:a,dir:f,goTo:h,boundaries:C,cls:M}){return[m("div",{class:"row items-center q-date__arrow"},[m(X,{round:!0,dense:!0,size:"sm",flat:!0,icon:ke.value[0],ariaLabel:n==="Years"?r.lang.date.prevYear:r.lang.date.prevMonth,tabindex:v.value,disable:C.prev===!1,...w("go-#"+n,{onClick(){h(-1)}})})]),m("div",{class:"relative-position overflow-hidden flex flex-center"+M},[m(Ve,{name:"q-transition--jump-"+f},()=>m("div",{key:a},[m(X,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:v.value,...w("view#"+n,{onClick:()=>{H.value=n}})})]))]),m("div",{class:"row items-center q-date__arrow"},[m(X,{round:!0,dense:!0,size:"sm",flat:!0,icon:ke.value[1],ariaLabel:n==="Years"?r.lang.date.nextYear:r.lang.date.nextMonth,tabindex:v.value,disable:C.next===!1,...w("go+#"+n,{onClick(){h(1)}})})])]}const Rt={Calendar:()=>[m("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[m("div",{class:"q-date__navigation row items-center no-wrap"},ct({label:V.value.months[u.value.month-1],type:"Months",key:u.value.month,dir:y.value,goTo:b,boundaries:je.value.month,cls:" col"}).concat(ct({label:u.value.year,type:"Years",key:u.value.year,dir:x.value,goTo:S,boundaries:je.value.year,cls:""}))),m("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},$e.value.map(t=>m("div",{class:"q-date__calendar-item"},[m("div",t)]))),m("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[m(Ve,{name:"q-transition--slide-"+y.value},()=>m("div",{key:J.value,class:"q-date__calendar-days fit"},we.value.map(t=>m("div",{class:t.classes},[t.in===!0?m(X,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:v.value,...w("day#"+t.i,{onClick:()=>{Wt(t.i)},onMouseover:()=>{Xt(t.i)}})},t.event!==!1?()=>m("div",{class:"q-date__event bg-"+t.event}):null):m("div",""+t.i)]))))])])],Months(){const t=u.value.year===k.value.year,n=f=>Z.value!==null&&u.value.year===Z.value.year&&Z.value.month>f||K.value!==null&&u.value.year===K.value.year&&K.value.month<f,a=V.value.monthsShort.map((f,h)=>{const C=u.value.month===h+1;return m("div",{class:"q-date__months-item flex flex-center"},[m(X,{class:t===!0&&k.value.month===h+1?"q-date__today":null,flat:C!==!0,label:f,unelevated:C,color:C===!0?ae.value:null,textColor:C===!0?oe.value:null,tabindex:v.value,disable:n(h+1),...w("month#"+h,{onClick:()=>{te(h+1)}})})])});return e.yearsInMonthView===!0&&a.unshift(m("div",{class:"row no-wrap full-width"},[ct({label:u.value.year,type:"Years",key:u.value.year,dir:x.value,goTo:S,boundaries:je.value.year,cls:" col"})])),m("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},a)},Years(){const t=re.value,n=t+fe,a=[],f=h=>Z.value!==null&&Z.value.year>h||K.value!==null&&K.value.year<h;for(let h=t;h<=n;h++){const C=u.value.year===h;a.push(m("div",{class:"q-date__years-item flex flex-center"},[m(X,{key:"yr"+h,class:k.value.year===h?"q-date__today":null,flat:!C,label:h,dense:!0,unelevated:C,color:C===!0?ae.value:null,textColor:C===!0?oe.value:null,tabindex:v.value,disable:f(h),...w("yr#"+h,{onClick:()=>{P(h)}})})]))}return m("div",{class:"q-date__view q-date__years flex flex-center"},[m("div",{class:"col-auto"},[m(X,{round:!0,dense:!0,flat:!0,icon:ke.value[0],ariaLabel:r.lang.date.prevRangeYears(fe),tabindex:v.value,disable:f(t),...w("y-",{onClick:()=>{re.value-=fe}})})]),m("div",{class:"q-date__years-content col self-stretch row items-center"},a),m("div",{class:"col-auto"},[m(X,{round:!0,dense:!0,flat:!0,icon:ke.value[1],ariaLabel:r.lang.date.nextRangeYears(fe),tabindex:v.value,disable:f(n),...w("y+",{onClick:()=>{re.value+=fe}})})])])}};function Wt(t){const n={...u.value,day:t};if(e.range===!1){q(n,J.value);return}if(z.value===null){const a=we.value.find(h=>h.fill!==!0&&h.i===t);if(e.noUnset!==!0&&a.range!==void 0){it({target:n,from:a.range.from,to:a.range.to});return}if(a.selected===!0){it(n);return}const f=me(n);z.value={init:n,initHash:f,final:n,finalHash:f},c("rangeStart",E(n))}else{const a=z.value.initHash,f=me(n),h=a<=f?{from:z.value.init,to:n}:{from:n,to:z.value.init};z.value=null,st(a===f?n:{target:n,...h}),c("rangeEnd",{from:E(h.from),to:E(h.to)})}}function Xt(t){if(z.value!==null){const n={...u.value,day:t};Object.assign(z.value,{final:n,finalHash:me(n)})}}return Object.assign(d,{setToday:Fe,setView:Je,offsetCalendar:Le,setCalendarTo:ve,setEditingRange:Pe}),()=>{const t=[m("div",{class:"q-date__content col relative-position"},[m(Ve,{name:"q-transition--fade"},Rt[H.value])])],n=$t(l.default);return n!==void 0&&t.push(m("div",{class:"q-date__actions"},n)),e.name!==void 0&&e.disable!==!0&&A(t,"push"),m("div",{class:ce.value,...qe.value},[Kt(),m("div",{ref:F,class:"q-date__main col column",tabindex:-1},t)])}}}),nt=Mt({name:"QPopupProxy",props:{...hn,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:l,emit:c,attrs:d}){const{proxy:r}=Dt(),{$q:s}=r,w=L(!1),v=L(null),_=D(()=>parseInt(e.breakpoint,10)),{canShow:O}=gn({showing:w});function g(){return s.screen.width<_.value||s.screen.height<_.value?"dialog":"menu"}const p=L(g()),Q=D(()=>p.value==="menu"?{maxHeight:"99vh"}:{});ie(()=>g(),I=>{w.value!==!0&&(p.value=I)});function A(I){w.value=!0,c("show",I)}function F(I){w.value=!1,p.value=g(),c("hide",I)}return Object.assign(r,{show(I){O(I)===!0&&v.value.show(I)},hide(I){v.value.hide(I)},toggle(I){v.value.toggle(I)}}),en(r,"currentComponent",()=>({type:p.value,ref:v.value})),()=>{const I={ref:v,...Q.value,...d,onShow:A,onHide:F};let V;return p.value==="dialog"?V=tn:(V=yn,Object.assign(I,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),m(V,I,l.default)}}});function Un(e,l){return e.hour!==null&&e.minute===null?"minute":"hour"}function $n(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}const Ht=Mt({name:"QTime",props:{...It,...Vt,...ot,modelValue:{required:!0,validator:e=>typeof e=="string"||e===null},mask:{...ot.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Lt,setup(e,{slots:l,emit:c}){const d=Dt(),{$q:r}=d.proxy,s=Nt(e,r),{tabindex:w,headerClass:v,getLocale:_,getCurrentDate:O}=Pt(e,r),g=Ut(e),p=jt(g);let Q,A;const F=L(null),I=D(()=>Re()),V=D(()=>_()),ee=D(()=>ke()),ge=Ze(e.modelValue,I.value,V.value,e.calendar,ee.value),k=L(Un(ge)),u=L(ge),H=L(ge.hour===null||ge.hour<12),N=D(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(s.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),y=D(()=>{const o=u.value;return{hour:o.hour===null?"--":x.value===!0?T(o.hour):String(H.value===!0?o.hour===0?12:o.hour:o.hour>12?o.hour-12:o.hour),minute:o.minute===null?"--":T(o.minute),second:o.second===null?"--":T(o.second)}}),x=D(()=>e.format24h!==null?e.format24h:r.lang.date.format24h),le=D(()=>{const o=k.value==="hour",i=o===!0?12:60,b=u.value[k.value];let P=`rotate(${Math.round(b*(360/i))-180}deg) translateX(-50%)`;return o===!0&&x.value===!0&&u.value.hour>=12&&(P+=" scale(.7)"),{transform:P}}),re=D(()=>u.value.hour!==null),z=D(()=>re.value===!0&&u.value.minute!==null),ce=D(()=>e.hourOptions!==void 0?o=>e.hourOptions.includes(o):e.options!==void 0?o=>e.options(o,null,null):null),ae=D(()=>e.minuteOptions!==void 0?o=>e.minuteOptions.includes(o):e.options!==void 0?o=>e.options(u.value.hour,o,null):null),oe=D(()=>e.secondOptions!==void 0?o=>e.secondOptions.includes(o):e.options!==void 0?o=>e.options(u.value.hour,u.value.minute,o):null),W=D(()=>{if(ce.value===null)return null;const o=_e(0,11,ce.value),i=_e(12,11,ce.value);return{am:o,pm:i,values:o.values.concat(i.values)}}),de=D(()=>ae.value!==null?_e(0,59,ae.value):null),R=D(()=>oe.value!==null?_e(0,59,oe.value):null),ue=D(()=>{switch(k.value){case"hour":return W.value;case"minute":return de.value;case"second":return R.value}}),pe=D(()=>{let o,i,b=0,S=1;const P=ue.value!==null?ue.value.values:void 0;k.value==="hour"?x.value===!0?(o=0,i=23):(o=0,i=11,H.value===!1&&(b=12)):(o=0,i=55,S=5);const te=[];for(let q=o,E=o;q<=i;q+=S,E++){const G=q+b,et=P?.includes(G)===!1,He=k.value==="hour"&&q===0?x.value===!0?"00":"12":q;te.push({val:G,index:E,disable:et,label:He})}return te}),Ne=D(()=>[[wn,se,void 0,{stop:!0,prevent:!0,mouse:!0}]]);ie(()=>e.modelValue,o=>{const i=Ze(o,I.value,V.value,e.calendar,ee.value);(i.dateHash!==u.value.dateHash||i.timeHash!==u.value.timeHash)&&(u.value=i,i.hour===null?k.value="hour":H.value=i.hour<12)}),ie([I,V],()=>{gt(()=>{Pe()})});function ye(){const o={...O(),...$n()};Pe(o),Object.assign(u.value,o),k.value="hour"}function _e(o,i,b){const S=Array.apply(null,{length:i+1}).map((P,te)=>{const q=te+o;return{index:q,val:b(q)===!0}}).filter(P=>P.val===!0).map(P=>P.index);return{min:S[0],max:S[S.length-1],values:S,threshold:i+1}}function Ke(o,i,b){const S=Math.abs(o-i);return Math.min(S,b-S)}function Ue(o,{min:i,max:b,values:S,threshold:P}){if(o===i)return i;if(o<i||o>b)return Ke(o,i,P)<=Ke(o,b,P)?i:b;const te=S.findIndex(G=>o<=G),q=S[te-1],E=S[te];return o-q<=E-o?q:E}function Re(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function ke(){if(typeof e.defaultDate!="string"){const o=O(!0);return o.dateHash=me(o),o}return Ze(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function Ye(){return an(d)===!0||ue.value!==null&&(ue.value.values.length===0||k.value==="hour"&&x.value!==!0&&W.value[H.value===!0?"am":"pm"].values.length===0)}function $e(){const o=F.value,{top:i,left:b,width:S}=o.getBoundingClientRect(),P=S/2;return{top:i+P,left:b+P,dist:P*.7}}function se(o){if(Ye()!==!0){if(o.isFirst===!0){Q=$e(),A=Z(o.evt,Q);return}A=Z(o.evt,Q,A),o.isFinal===!0&&(Q=!1,A=null,We())}}function We(){k.value==="hour"?k.value="minute":e.withSeconds&&k.value==="minute"&&(k.value="second")}function Z(o,i,b){const S=nn(o),P=Math.abs(S.top-i.top),te=Math.sqrt(Math.pow(Math.abs(S.top-i.top),2)+Math.pow(Math.abs(S.left-i.left),2));let q,E=Math.asin(P/te)*(180/Math.PI);if(S.top<i.top?E=i.left<S.left?90-E:270+E:E=i.left<S.left?E+90:270-E,k.value==="hour"){if(q=E/30,W.value!==null){const G=x.value!==!0?H.value===!0:W.value.am.values.length!==0&&W.value.pm.values.length!==0?te>=i.dist:W.value.am.values.length!==0;q=Ue(q+(G===!0?0:12),W.value[G===!0?"am":"pm"])}else q=Math.round(q),x.value===!0?te<i.dist?q<12&&(q+=12):q===12&&(q=0):H.value===!0&&q===12?q=0:H.value===!1&&q!==12&&(q+=12);x.value===!0&&(H.value=q<12)}else q=Math.round(E/6)%60,k.value==="minute"&&de.value!==null?q=Ue(q,de.value):k.value==="second"&&R.value!==null&&(q=Ue(q,R.value));return b!==q&&Ae[k.value](q),q}const K={hour(){k.value="hour"},minute(){k.value="minute"},second(){k.value="second"}};function je(o){o.keyCode===13&&Fe()}function Ce(o){o.keyCode===13&&Je()}function Xe(o){Ye()!==!0&&(r.platform.is.desktop!==!0&&Z(o,$e()),We())}function be(o){Ye()!==!0&&Z(o,$e())}function J(o){if(o.keyCode===13)k.value="hour";else if([37,39].includes(o.keyCode)){const i=o.keyCode===37?-1:1;if(W.value!==null){const b=x.value===!0?W.value.values:W.value[H.value===!0?"am":"pm"].values;if(b.length===0)return;if(u.value.hour===null)Se(b[0]);else{const S=(b.length+b.indexOf(u.value.hour)+i)%b.length;Se(b[S])}}else{const b=x.value===!0?24:12,S=x.value!==!0&&H.value===!1?12:0,P=u.value.hour===null?-i:u.value.hour;Se(S+(24+P+i)%b)}}}function ut(o){if(o.keyCode===13)k.value="minute";else if([37,39].includes(o.keyCode)){const i=o.keyCode===37?-1:1;if(de.value!==null){const b=de.value.values;if(b.length===0)return;if(u.value.minute===null)we(b[0]);else{const S=(b.length+b.indexOf(u.value.minute)+i)%b.length;we(b[S])}}else{const b=u.value.minute===null?-i:u.value.minute;we((60+b+i)%60)}}}function rt(o){if(o.keyCode===13)k.value="second";else if([37,39].includes(o.keyCode)){const i=o.keyCode===37?-1:1;if(R.value!==null){const b=R.value.values;if(b.length===0)return;if(u.value.seconds===null)qe(b[0]);else{const S=(b.length+b.indexOf(u.value.second)+i)%b.length;qe(b[S])}}else{const b=u.value.second===null?-i:u.value.second;qe((60+b+i)%60)}}}function Se(o){u.value.hour!==o&&(u.value.hour=o,ve())}function we(o){u.value.minute!==o&&(u.value.minute=o,ve())}function qe(o){u.value.second!==o&&(u.value.second=o,ve())}const Ae={hour:Se,minute:we,second:qe};function Fe(){H.value===!1&&(H.value=!0,u.value.hour!==null&&(u.value.hour-=12,ve()))}function Je(){H.value===!0&&(H.value=!1,u.value.hour!==null&&(u.value.hour+=12,ve()))}function Le(o){const i=e.modelValue;k.value!==o&&i!==void 0&&i!==null&&i!==""&&typeof i!="string"&&(k.value=o)}function ve(){if(ce.value!==null&&ce.value(u.value.hour)!==!0){u.value=Ze(),Le("hour");return}if(ae.value!==null&&ae.value(u.value.minute)!==!0){u.value.minute=null,u.value.second=null,Le("minute");return}if(e.withSeconds===!0&&oe.value!==null&&oe.value(u.value.second)!==!0){u.value.second=null,Le("second");return}u.value.hour===null||u.value.minute===null||e.withSeconds===!0&&u.value.second===null||Pe()}function Pe(o){const i=Object.assign({...u.value},o),b=e.calendar==="persian"?T(i.hour)+":"+T(i.minute)+(e.withSeconds===!0?":"+T(i.second):""):Zt(new Date(i.year,i.month===null?null:i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond),I.value,V.value,i.year,i.timezoneOffset);i.changed=b!==e.modelValue,c("update:modelValue",b,i)}function Ge(){const o=[m("div",{class:"q-time__link "+(k.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:w.value,onClick:K.hour,onKeyup:J},y.value.hour),m("div",":"),m("div",re.value===!0?{class:"q-time__link "+(k.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:w.value,onKeyup:ut,onClick:K.minute}:{class:"q-time__link"},y.value.minute)];e.withSeconds===!0&&o.push(m("div",":"),m("div",z.value===!0?{class:"q-time__link "+(k.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:w.value,onKeyup:rt,onClick:K.second}:{class:"q-time__link"},y.value.second));const i=[m("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},o)];return x.value===!1&&i.push(m("div",{class:"q-time__header-ampm column items-between no-wrap"},[m("div",{class:"q-time__link "+(H.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:w.value,onClick:Fe,onKeyup:je},"AM"),m("div",{class:"q-time__link "+(H.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:w.value,onClick:Je,onKeyup:Ce},"PM")])),m("div",{class:"q-time__header flex flex-center no-wrap "+v.value},i)}function Ee(){const o=u.value[k.value];return m("div",{class:"q-time__content col relative-position"},[m(Ve,{name:"q-transition--scale"},()=>m("div",{key:"clock"+k.value,class:"q-time__container-parent absolute-full"},[m("div",{ref:F,class:"q-time__container-child fit overflow-hidden"},[ze(m("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Xe,onMousedown:be},[m("div",{class:"q-time__clock-circle fit"},[m("div",{class:"q-time__clock-pointer"+(u.value[k.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:le.value}),pe.value.map(i=>m("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${i.index}`+(i.val===o?" q-time__clock-position--active "+v.value:i.disable===!0?" q-time__clock-position--disable":"")},[m("span",i.label)]))])]),Ne.value)])])),e.nowBtn===!0?m(X,{class:"q-time__now-button absolute",icon:r.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:w.value,onClick:ye}):null])}return d.proxy.setNow=ye,()=>{const o=[Ee()],i=$t(l.default);return i!==void 0&&o.push(m("div",{class:"q-time__actions"},i)),e.name!==void 0&&e.disable!==!0&&p(o,"push"),m("div",{class:N.value,tabindex:-1},[Ge(),m("div",{class:"q-time__main col overflow-auto"},o)])}}});function Tt(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const l=parseInt(e,10);return isNaN(l)?0:l}const at=ln({name:"close-popup",beforeMount(e,{value:l}){const c={depth:Tt(l),handler(d){c.depth!==0&&setTimeout(()=>{const r=un(e);r!==void 0&&rn(r,d,c.depth)})},handlerKey(d){on(d,13)===!0&&c.handler(d)}};e.__qclosepopup=c,e.addEventListener("click",c.handler),e.addEventListener("keyup",c.handlerKey)},updated(e,{value:l,oldValue:c}){l!==c&&(e.__qclosepopup.depth=Tt(l))},beforeUnmount(e){const l=e.__qclosepopup;e.removeEventListener("click",l.handler),e.removeEventListener("keyup",l.handlerKey),delete e.__qclosepopup}}),jn={class:"col q-gutter-md q-pa-md"},An={class:"row"},Fn={class:"row items-center justify-end"},Ln={class:"row items-center justify-end"},Pn={class:"row"},En={class:"row items-center justify-end"},Bn={class:"row items-center justify-end"},Xn=sn({__name:"TimestampPage",setup(e){class l{label;nanoseconds;nbNanosecondsDigits;constructor(y,x){this.label=y,this.nanoseconds=x,this.nbNanosecondsDigits=Math.floor(Math.log10(x))}fromNanoseconds(y){return y/this.nanoseconds}toNanoseconds(y){return y*this.nanoseconds}toMilliseconds(y){return y*this.nanoseconds/1e6}}const c=new l("ns",1),d=new l("s",1e9),r=new l("ms",1e6),s=new l("µs",1e3);class w extends l{baseLabel;knownUnits;nbDigitsNowNs;lastUnit;constructor(y,x){super(y,0),this.baseLabel=y,this.knownUnits=x;const le=new Date().getTime();this.nbDigitsNowNs=Math.floor(Math.log10(r.toNanoseconds(le))),this.lastUnit=r,this.autoUnit(le)}detectUnit(y){const x=Math.floor(Math.log10(Math.abs(y))),re=this.knownUnits.filter(z=>x<=this.nbDigitsNowNs-z.nbNanosecondsDigits).sort((z,ce)=>ce.nanoseconds-z.nanoseconds)[0];return re||c}autoUnit(y){const x=this.detectUnit(y);return this.label=`${this.baseLabel} (${x.label})`,this.lastUnit=x,x}fromNanoseconds(y){return this.lastUnit.fromNanoseconds(y)}toNanoseconds(y){return this.autoUnit(y).toNanoseconds(y)}toMilliseconds(y){return this.autoUnit(y).toMilliseconds(y)}}const v=new w("Auto",[c,d,r,s]),_=[v,...v.knownUnits],O=L(r.toNanoseconds(new Date().getTime())),g=L(v);function p(){O.value=r.toNanoseconds(new Date().getTime())}const Q=L(new Date().getTime()),A=L(""),F=L(""),I=Intl.supportedValuesOf("timeZone"),V=L(I),ee=L(Intl.DateTimeFormat().resolvedOptions().timeZone);ie(O,N=>{if(isFinite(N)){const y=new Date(c.toMilliseconds(N));Q.value=Math.floor(g.value.fromNanoseconds(N)),A.value=pn(y),F.value=pt(y,ee.value)}},{immediate:!0}),ie(ee,()=>{F.value=pt(new Date(c.toMilliseconds(O.value)),ee.value)});function ge(N,y){N==""?y(()=>{V.value=I}):y(()=>{const x=N.toLowerCase();V.value=I.filter(le=>le.toLowerCase().includes(x))})}function k(N){N!=null&&(typeof N=="string"&&(N=parseInt(N)),isFinite(N)&&(O.value=g.value.toNanoseconds(N)))}function u(N){if(N==null)return;const y=new Date(N);if(y!==void 0){const x=y.getTime()-y.getTimezoneOffset()*6e4;isNaN(x)||(O.value=r.toNanoseconds(x))}}function H(N){if(N==null)return;const y=new Date(N);y!==void 0&&(O.value=r.toNanoseconds(y.getTime()))}return(N,y)=>(dn(),cn(Mn,{padding:""},{default:B(()=>[xe("div",jn,[xe("div",An,[$(dt,{class:"col",modelValue:Q.value,"onUpdate:modelValue":[y[1]||(y[1]=x=>Q.value=x),k],modelModifiers:{number:!0},type:"number",inputmode:"numeric",label:"Unix Timestamp"},{prepend:B(()=>[$(Qe,{name:"history",onClick:y[0]||(y[0]=x=>p())})]),_:1},8,["modelValue"]),$(xt,{class:"col q-px-md",modelValue:g.value,"onUpdate:modelValue":y[2]||(y[2]=x=>g.value=x),options:_,label:"Precision"},null,8,["modelValue"])]),$(dt,{modelValue:A.value,"onUpdate:modelValue":[y[3]||(y[3]=x=>A.value=x),u],label:"Date (UTC)",hint:"UTC date"},{prepend:B(()=>[$(Qe,{name:"event",class:"cursor-pointer"},{default:B(()=>[$(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:B(()=>[$(qt,{"model-value":A.value,mask:"YYYY-MM-DD HH:mm:ss","onUpdate:modelValue":u,"today-btn":!0},{default:B(()=>[xe("div",Fn,[ze($(X,{label:"Close",color:"primary",flat:""},null,512),[[at]])])]),_:1},8,["model-value"])]),_:1})]),_:1})]),append:B(()=>[$(Qe,{name:"access_time",class:"cursor-pointer"},{default:B(()=>[$(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:B(()=>[$(Ht,{"model-value":A.value,mask:"YYYY-MM-DD HH:mm:ss","onUpdate:modelValue":u,"now-btn":!0},{default:B(()=>[xe("div",Ln,[ze($(X,{label:"Close",color:"primary",flat:""},null,512),[[at]])])]),_:1},8,["model-value"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),xe("div",Pn,[$(dt,{class:"col",modelValue:F.value,"onUpdate:modelValue":[y[4]||(y[4]=x=>F.value=x),H],label:"Local date",hint:`Date in ${ee.value}: UTC ${vn(xn)(new Date(Q.value),ee.value)}`},{prepend:B(()=>[$(Qe,{name:"event",class:"cursor-pointer"},{default:B(()=>[$(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:B(()=>[$(qt,{"model-value":F.value,mask:"YYYY-MM-DD HH:mm:ss","onUpdate:modelValue":H,"today-btn":!0},{default:B(()=>[xe("div",En,[ze($(X,{label:"Close",color:"primary",flat:""},null,512),[[at]])])]),_:1},8,["model-value"])]),_:1})]),_:1})]),append:B(()=>[$(Qe,{name:"access_time",class:"cursor-pointer"},{default:B(()=>[$(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:B(()=>[$(Ht,{"model-value":F.value,mask:"YYYY-MM-DD HH:mm:ss","onUpdate:modelValue":H,"now-btn":!0},{default:B(()=>[xe("div",Bn,[ze($(X,{label:"Close",color:"primary",flat:""},null,512),[[at]])])]),_:1},8,["model-value"])]),_:1})]),_:1})]),_:1},8,["modelValue","hint"]),$(xt,{class:"col q-mx-md",modelValue:ee.value,"onUpdate:modelValue":y[6]||(y[6]=x=>ee.value=x),options:V.value,label:"Timezone","use-input":"","input-debounce":"0",onFilter:ge},{append:B(()=>[$(X,{icon:"public",flat:"",onClick:y[5]||(y[5]=mn(x=>ee.value=Intl.DateTimeFormat().resolvedOptions().timeZone,["prevent"]))})]),"no-option":B(()=>[$(_n,null,{default:B(()=>[$(bn,{class:"text-grey"},{default:B(()=>y[7]||(y[7]=[fn(" No results ")])),_:1})]),_:1})]),_:1},8,["modelValue","options"])])])]),_:1}))}});export{Xn as default};
